<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>현수쓰</title>
  
  <subtitle>하루를 기록하다</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://khs9628.github.io/"/>
  <updated>2019-09-24T08:16:36.575Z</updated>
  <id>https://khs9628.github.io/</id>
  
  <author>
    <name>현수쓰</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dnote3</title>
    <link href="https://khs9628.github.io/2019/09/24/Dnote3/"/>
    <id>https://khs9628.github.io/2019/09/24/Dnote3/</id>
    <published>2019-09-24T08:16:36.000Z</published>
    <updated>2019-09-24T08:16:36.575Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Dnote2</title>
    <link href="https://khs9628.github.io/2019/09/24/Dnote2/"/>
    <id>https://khs9628.github.io/2019/09/24/Dnote2/</id>
    <published>2019-09-24T07:44:39.000Z</published>
    <updated>2019-09-24T08:12:28.355Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://velog.io/@killi8n/Django%EC%99%80-React%EB%A1%9C-%ED%95%9C%EC%A4%84-%EB%85%B8%ED%8A%B8-%EC%95%B1-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EA%B8%B0-2.-React-Django-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1.-najmam6ds2" rel="external nofollow noopener noreferrer" target="_blank">참고 블로그</a></p><h1 id="React-amp-Django-프로젝트"><a href="#React-amp-Django-프로젝트" class="headerlink" title="React &amp; Django 프로젝트"></a>React &amp; Django 프로젝트</h1><p><strong>input태그를 이용하여 직관적으로 한줄 노트를 작성할수 있는 앱</strong></p><h2 id="STEP2-Redux-설정"><a href="#STEP2-Redux-설정" class="headerlink" title="STEP2. Redux 설정"></a>STEP2. Redux 설정</h2><p>Redux는 글로벌하게 상태관리를 할수있게 도와주는 도구</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install redux react-redux redux-observable rxjs rxjs-compat</span><br></pre></td></tr></table></figure><p><strong><em>cf)</em></strong><br><code>redux-observable</code></p><blockquote><p>rxjs의 개념이 도입된 라이브러리</p></blockquote><p><code>rxjs</code></p><blockquote><p>RxJS는 Observable를 사용하여 비동기 및 이벤트 기반 프로그램을 작성하기 위한 라이브러리이다.</p></blockquote><p><code>store/modules/ping.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PING = <span class="string">"PING"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  ping: <span class="string">"ping"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ping = <span class="function">(<span class="params">state = initialState, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> PING:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ping: <span class="string">"pong"</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>store/modules/index.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ping &#125; <span class="keyword">from</span> <span class="string">"./ping"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> rootReducers = combineReducers(&#123; ping &#125;);</span><br></pre></td></tr></table></figure><p><code>store/configure.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createEpicMiddleware &#125; <span class="keyword">from</span> <span class="string">"redux-observable"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; rootReducers &#125; <span class="keyword">from</span> <span class="string">"./modules"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 크롬 데브 툴스 설정입니다.</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;</span><br><span class="line"><span class="keyword">const</span> epicMiddleware = createEpicMiddleware();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(</span><br><span class="line">    rootReducers,</span><br><span class="line">    composeEnhancers(applyMiddleware(epicMiddleware))</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd" rel="external nofollow noopener noreferrer" target="_blank">redux-devtools 확장프로그램</a></p><p><img alt="실행화면" data-src="/img/Django/redux.PNG" class="lozad"></p><h2 id="오류"><a href="#오류" class="headerlink" title="오류"></a>오류</h2><p><code>No store found.</code> -&gt; npm start 다시 해보면 뜰거임</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://velog.io/@killi8n/Django%EC%99%80-React%EB%A1%9C-%ED%95%9C%EC%A4%84-%EB%85%B8%ED%8A%B8-%EC%95%B1-%EB%A7%8C%EB%93%A4%EC%9
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
  </entry>
  
  <entry>
    <title>React와 Django 프로젝트</title>
    <link href="https://khs9628.github.io/2019/09/24/Dnote1/"/>
    <id>https://khs9628.github.io/2019/09/24/Dnote1/</id>
    <published>2019-09-24T07:43:34.000Z</published>
    <updated>2019-09-24T07:51:43.921Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://velog.io/@killi8n/Django%EC%99%80-React%EB%A1%9C-%ED%95%9C%EC%A4%84-%EB%85%B8%ED%8A%B8-%EC%95%B1-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EA%B8%B0-2.-React-Django-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1.-najmam6ds2" rel="external nofollow noopener noreferrer" target="_blank">참고 블로그</a></p><h1 id="React-amp-Django-프로젝트"><a href="#React-amp-Django-프로젝트" class="headerlink" title="React &amp; Django 프로젝트"></a>React &amp; Django 프로젝트</h1><p><strong>input태그를 이용하여 직관적으로 한줄 노트를 작성할수 있는 앱</strong></p><h2 id="STEP1-초기-설정"><a href="#STEP1-초기-설정" class="headerlink" title="STEP1. 초기 설정"></a>STEP1. 초기 설정</h2><h3 id="Django-앱생성"><a href="#Django-앱생성" class="headerlink" title="Django 앱생성"></a>Django 앱생성</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 가상환경 생성</span></span><br><span class="line">python –m venv venv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 가상환경 접속</span></span><br><span class="line"><span class="built_in">source</span> venv/Scripts/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># django 프로젝트 생성</span></span><br><span class="line">(venv) pip install django</span><br><span class="line">(venv) django-admin startproject dnote</span><br><span class="line">(venv) <span class="built_in">cd</span> dnote</span><br><span class="line">(venv) python manage.py migrate</span><br><span class="line">(venv) python manage.py runserver <span class="comment"># 실행확인</span></span><br></pre></td></tr></table></figure><h3 id="react-앱생성"><a href="#react-앱생성" class="headerlink" title="react 앱생성"></a>react 앱생성</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-react-app</span><br><span class="line">create-react-app frontend</span><br><span class="line"><span class="built_in">cd</span> frontend</span><br><span class="line">npm start <span class="comment"># 실행확인</span></span><br></pre></td></tr></table></figure><h3 id="React-개발-환경-설정-및-구조-잡기-sass-설정"><a href="#React-개발-환경-설정-및-구조-잡기-sass-설정" class="headerlink" title="React - 개발 환경 설정 및 구조 잡기.(sass 설정)"></a>React - 개발 환경 설정 및 구조 잡기.(sass 설정)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> frontend</span><br><span class="line"><span class="comment"># 관련 패키지 다운</span></span><br><span class="line">npm install</span><br><span class="line">npm run eject</span><br><span class="line"><span class="comment"># 오류시 git add. / git commit -m "" 해줘야함 </span></span><br><span class="line"><span class="comment"># -&gt; 최상 디렉터리에(해당 폴더 git이 있어서 충돌)</span></span><br><span class="line">npm start <span class="comment"># react 시작하기</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sass 설정</span></span><br><span class="line">npm install --save-dev node-sass</span><br><span class="line">npm install --save-dev sass-loader</span><br></pre></td></tr></table></figure><h3 id="config-paths-js"><a href="#config-paths-js" class="headerlink" title="config/paths.js"></a>config/paths.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config after eject: we're in ./config/</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// 추가해줍니다.</span></span><br><span class="line">  styles: resolveApp(<span class="string">"src/styles"</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="React-개발-환경-설정-및-구조-잡기-프로젝트-구조잡기"><a href="#React-개발-환경-설정-및-구조-잡기-프로젝트-구조잡기" class="headerlink" title="React - 개발 환경 설정 및 구조 잡기.(프로젝트 구조잡기)"></a>React - 개발 환경 설정 및 구조 잡기.(프로젝트 구조잡기)</h2><p><strong>Project : frontend</strong></p><pre><code>frontend/        # 프로젝트의 루트 디렉토리입니다.    ├── config/       # react-app 의 설정파일이 모여있는 폴더입니다.    ├── public/       #    ├── scripts/      #    ├── node_modules/   #     └── src/        ├── styles/     # scss/img 등 디자인 파일들 집합        ├── containers/ # 리액트 컨테이너 파일들 집합        ├── components/ # 리액트 컴포넌트 파일들 집합        ├── pages/    # Routing에서 사용될 page 파일들 집합        └── store/     # redux모듈들과 configure파일들 집합</code></pre><h3 id="NODE-PATH-지정"><a href="#NODE-PATH-지정" class="headerlink" title="NODE_PATH 지정"></a>NODE_PATH 지정</h3><p><code>src/.env</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_PATH=src</span><br></pre></td></tr></table></figure><h3 id="기본-구조-세팅-app-js-gt-root-js-gt-index-js"><a href="#기본-구조-세팅-app-js-gt-root-js-gt-index-js" class="headerlink" title="기본 구조 세팅 app.js -&gt; root.js -&gt; index.js"></a>기본 구조 세팅 app.js -&gt; root.js -&gt; index.js</h3><p><code>src/components/App.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>App.js<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><code>src/Root.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./components/App"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Root = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default Root;</span></span><br></pre></td></tr></table></figure><p><code>src/index.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> Root <span class="keyword">from</span> <span class="string">"./Root"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style/index.scss'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> serviceWorker <span class="keyword">from</span> <span class="string">'./serviceWorker'</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Root</span> /&gt;</span>, document.getElementById("root"));</span></span><br><span class="line"><span class="xml">serviceWorker.unregister();</span></span><br></pre></td></tr></table></figure><p><img alt="결과" data-src="/img/React/result1.PNG" class="lozad"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://velog.io/@killi8n/Django%EC%99%80-React%EB%A1%9C-%ED%95%9C%EC%A4%84-%EB%85%B8%ED%8A%B8-%EC%95%B1-%EB%A7%8C%EB%93%A4%EC%9
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>(Django CBV) 소셜 로그인</title>
    <link href="https://khs9628.github.io/2019/09/22/CBV6/"/>
    <id>https://khs9628.github.io/2019/09/22/CBV6/</id>
    <published>2019-09-22T08:52:13.000Z</published>
    <updated>2019-09-24T06:23:46.582Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-CBV-프로젝트-3-소셜-로그인-간편로그인"><a href="#Django-CBV-프로젝트-3-소셜-로그인-간편로그인" class="headerlink" title="Django CBV 프로젝트 3. 소셜 로그인 (간편로그인)"></a>Django CBV 프로젝트 3. 소셜 로그인 (간편로그인)</h1><p><a href="https://swarf00.github.io/2018/12/14/logout.html" rel="external nofollow noopener noreferrer" target="_blank">참고 사이트</a></p><h2 id="구조-변경-리팩토링"><a href="#구조-변경-리팩토링" class="headerlink" title="구조 변경(리팩토링)"></a>구조 변경(리팩토링)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># static 파일설정</span></span><br><span class="line">STATIC_URL = <span class="string">'/static/'</span></span><br><span class="line">STATIC_ROOT = <span class="string">'./static'</span></span><br><span class="line"><span class="comment"># STATIC_URL: 이 경로로 시작되는 요청은 static 핸들러로 라우팅</span></span><br><span class="line"><span class="comment"># STATIC_ROOT: collectstatic 커맨드로 static 파일들을 모을 때 저장될 디렉토리 경로</span></span><br></pre></td></tr></table></figure><h2 id="프로젝트-구성"><a href="#프로젝트-구성" class="headerlink" title="프로젝트 구성"></a>프로젝트 구성</h2><pre><code># Projectstatic              # python manage.py collectstatic 명령어 수행시 파일이 저장되는 디렉토리입니다.|      minitutorial/        # 프로젝트의 루트 디렉토리입니다. 디렉토리이름은 변경하셔도 됩니다.├── manage.py       # CLI에서 장고 프로젝트의 다양한 기능들을 사용할 수 있게 해주는 유틸리티입니다.└── minitutorial/   # 실제 프로젝트 디렉토리입니다. 프로젝트의 설정을 할 수 있으며, 파이썬 패키지로 사용됩니다.    ├── __init__.py # 파이썬 패키지에 필수로 들어있는 초기화 파일입니다. 프로젝트를 패키지로 불러올 때 가장 먼저 실행되는 스크립트입니다.    ├── settings.py # 프로젝트 설정파일입니다.    ├── urls.py     # 웹 url들을 view와 매칭시켜주는 파일입니다.    └── wsgi.py     # WSGI 호환 웹 서버로 서비스할 때 실행되는 시작점입니다.-------------------------------------------------# APPbbs/├── __init__.py      # 앱 패키지 초기화 스크립트입니다.├── admin.py         # 장고 어드민 설정파일입니다. 어드민에 등록된 모델은 장고에서 자동 생성하는 어드민 페이지에서 관리할 수 있습니다.├── apps.py          # 앱 설정 파일입니다.└── migrations/      # 데이터베이스 마이그레이션 디렉토리. 장고 ORM은 모델 스키마의 변화가 생길 때마다 migration 파일을 생성하고 이것을 통해 스키마를 업데이트 합니다. migration 파일을 통해 협업자들과 함께 데이터베이스의 스키마를 동기화할 수 있습니다.    ├── __init__.py  # 마이그레이션 패키지 초기화 스크립트입니다.    ├── models.py        # 앱 모델 파일입니다. 게시판의 모든 데이터를 저장할 데이터베이스를 장고 ORM을 통해 모델화합니다.    ├── tests.py         # 앱 내의 기능들을 테스트하는 기능을 구현하는 파일입니다.    ├── views.py         # 앱의 화면(template)과 데이터(model) 사이에서 사용자의 요청을 처리하여 모델에 저장하고, 모델에 저장된 데이터를 화면에 전달하는 역할을 합니다.├── static        └──css/            └──  bss.css    # 게시판 관련 css 파일입니다.└── templates/        ├── base.html                # 기본 틀이 되는 html        ├── article_list.html        # 게시글 목록이 보이는 html                ├── article_detail.html      # 특정 게시글이 보이는 html        └── article_update.html      # 새로운 게시글이나 특정 글을 update 하는 html-----------------------------------------------------user/├── __init__.py      # 앱 패키지 초기화 스크립트입니다.├── admin.py         # 장고 어드민 설정파일입니다. 어드민에 등록된 모델은 장고에서 자동 생성하는 어드민 페이지에서 관리할 수 있습니다.├── apps.py          # 앱 설정 파일입니다.└── migrations/      # 데이터베이스 마이그레이션 디렉토리. 장고 ORM은 모델 스키마의 변화가 생길 때마다 migration 파일을 생성하고 이것을 통해 스키마를 업데이트 합니다. migration 파일을 통해 협업자들과 함께 데이터베이스의 스키마를 동기화할 수 있습니다.    ├── __init__.py  # 마이그레이션 패키지 초기화 스크립트입니다.    ├── models.py        # 앱 모델 파일입니다. 회원의 모든 데이터를 저장할 데이터베이스를 장고 ORM을 통해 모델화합니다.    ├── tests.py         # 앱 내의 기능들을 테스트하는 기능을 구현하는 파일입니다.    ├── views.py         # 앱의 화면(template)과 데이터(model) 사이에서 사용자의 요청을 처리하여 모델에 저장하고, 모델에 저장된 데이터를 화면에 전달하는 역할을 합니다.    ├── mixins.py        # 기본 메소드(인증보내기)를 지정해서 코드를 단순화 합니다.    ├── validators.py    # 객체를 검증할 수 있는 기능을 제공 합니다.               ├── forms.py         # 앱의 form의 인자와 화면단을 구성해주는 파일입니다.├── static        └──css/            └──  user.css    # 회원 관련 css 파일입니다.         └──js            └── social_login.js # 로그인 관련 js 파일입니다.        └──img            ├──  kakao.img    # 카카오 소셜로그인 관련 파일입니다.                └──  naver.img    # 네이버 소셜로그인 관련 파일입니다.├── oauth    ├── /providers            └── naver.py      #     └── backends.py           # 네아로 계정을 local계정에 저장하도록 하는 └── templates/user/    ├── login_form.html                # 로그인 form html    ├── resend_verify_email.html       # 재 인증 메일 form html           ├── user_form.html                 # 회원가입 form html    ├── particals            ├── social_login_panel.html # 소셜로그인 form 부분 html 입니다.            └── form_field.html         # 공통 부분을 나눠 include 하기위한 html 파일입니다.    └── /email        └── registration_verification.html      # 사용자 email 보낼 때 form html</code></pre><h2 id="소셜-로그인-구현"><a href="#소셜-로그인-구현" class="headerlink" title="소셜 로그인 구현"></a>소셜 로그인 구현</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br><span class="line">pip install oauth</span><br></pre></td></tr></table></figure><h2 id="네아로-지정-settings-py"><a href="#네아로-지정-settings-py" class="headerlink" title="네아로 지정 (settings.py)"></a>네아로 지정 (settings.py)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NAVER_CLIENT_ID = <span class="string">'your client id'</span></span><br><span class="line">NAVER_SECRET_KEY = <span class="string">'your secret key'</span></span><br><span class="line"></span><br><span class="line">AUTHENTICATION_BACKENDS = [</span><br><span class="line">    <span class="string">'user.oauth.backends.NaverBackend'</span>,           <span class="comment"># 네이버 인증백엔드</span></span><br><span class="line">    <span class="string">'django.contrib.auth.backends.ModelBackend'</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="소셜-로그인-폼-생성"><a href="#소셜-로그인-폼-생성" class="headerlink" title="소셜 로그인 폼 생성"></a>소셜 로그인 폼 생성</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% static '/img/kakao_login.png' as kakao_button %&#125;</span><br><span class="line">&#123;% static '/img/kakao_login_ov.png' as kakao_button_hover %&#125;</span><br><span class="line">&#123;% static '/img/naver_login_green.png' as naver_button %&#125;</span><br><span class="line">&#123;% static '/img/naver_login_white.png' as naver_button_hover %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-default user-panel"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line">        &#123;&#123; panel_name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body text-center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pull-left"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; kakao_button &#125;&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">onmouseover</span>=<span class="string">"this.src='&#123;&#123; kakao_button_hover &#125;&#125;'"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">onmouseleave</span>=<span class="string">"this.src='&#123;&#123; kakao_button &#125;&#125;'"</span><span class="attr">height</span>=<span class="string">"34"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pull-right"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">onclick</span>=<span class="string">"naverLogin()"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; naver_button &#125;&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">onmouseover</span>=<span class="string">"this.src='&#123;&#123; naver_button_hover &#125;&#125;'"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">onmouseleave</span>=<span class="string">"this.src='&#123;&#123; naver_button &#125;&#125;'"</span><span class="attr">height</span>=<span class="string">"34"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"&#123;% static 'js/social_login.js' %&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- login / register form 에 include --&gt;</span></span><br><span class="line">&#123;% include 'user/partials/social_login_panel.html' with panel_name='소셜로그인' %&#125;</span><br></pre></td></tr></table></figure><p><img alt="form" data-src="/img/Django/social.PNG" class="lozad"></p><h2 id="클릭시-동작하는-js"><a href="#클릭시-동작하는-js" class="headerlink" title="클릭시 동작하는 js"></a>클릭시 동작하는 js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// user/static/user/js/social_login.js</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildQuery</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(params).map(<span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;<span class="keyword">return</span> key + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(params[key])&#125;).join(<span class="string">'&amp;'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildUrl</span>(<span class="params">baseUrl, queries</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseUrl + <span class="string">'?'</span> + buildQuery(queries)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">naverLogin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    params = &#123;</span><br><span class="line">        response_type: <span class="string">'code'</span>,</span><br><span class="line">        client_id:<span class="string">'lkfcHFxyz5UGC0gF81Ym'</span>,</span><br><span class="line">        redirect_uri: location.origin + <span class="string">'/user/login/social/naver/callback/'</span> + location.search,</span><br><span class="line">        state: <span class="built_in">document</span>.querySelector(<span class="string">'[name=csrfmiddlewaretoken]'</span>).value</span><br><span class="line">    &#125;</span><br><span class="line">    url = buildUrl(<span class="string">'https://nid.naver.com/oauth2.0/authorize'</span>, params)</span><br><span class="line">    location.replace(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img alt="form1" data-src="/img/Django/social2.PNG" class="lozad"></p><h2 id="CallBackView-작성"><a href="#CallBackView-작성" class="headerlink" title="CallBackView 작성"></a>CallBackView 작성</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.views.generic.base <span class="keyword">import</span> TemplateView, View</span><br><span class="line"><span class="keyword">from</span> django.middleware.csrf <span class="keyword">import</span> _compare_salted_tokens</span><br><span class="line"><span class="keyword">from</span> user.oauth.providers.naver <span class="keyword">import</span> NaverLoginMixin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SocialLoginCallbackView</span><span class="params">(NaverLoginMixin, View)</span>:</span></span><br><span class="line"></span><br><span class="line">    success_url = settings.LOGIN_REDIRECT_URL</span><br><span class="line">    failure_url = settings.LOGIN_URL</span><br><span class="line">    required_profiles = [<span class="string">'email'</span>, <span class="string">'nickname'</span>]</span><br><span class="line"></span><br><span class="line">    model = get_user_model()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line"></span><br><span class="line">        provider = kwargs.get(<span class="string">'provider'</span>)</span><br><span class="line">        success_url = request.GET.get(<span class="string">'next'</span>, self.success_url)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> provider == <span class="string">'naver'</span>: <span class="comment"># provider가 naver 인경우</span></span><br><span class="line">            csrf_token = request.GET.get(<span class="string">'state'</span>)</span><br><span class="line">            code = request.GET.get(<span class="string">'code'</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> _compare_salted_tokens(csrf_token, request.COOKIES.get(<span class="string">'csrftoken'</span>)):</span><br><span class="line">                messages.error(request, <span class="string">'잘못된 경로로 로그인하셨습니다.'</span>, extra_tags=<span class="string">'danger'</span>)</span><br><span class="line">                <span class="keyword">return</span> HttpResponseRedirect(self.failure_url)</span><br><span class="line">            is_success, error = self.login_with_naver(csrf_token, code)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> is_success: <span class="comment"># 로그인이 실패할 경우</span></span><br><span class="line">                messages.error(request, error, extra_tags=<span class="string">'danger'</span>)</span><br><span class="line">            <span class="keyword">return</span> HttpResponseRedirect(success_url <span class="keyword">if</span> is_success <span class="keyword">else</span> self.failure_url)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(self.failure_url)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_session</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> kwargs.items():</span><br><span class="line">            self.request.session[key] = value</span><br></pre></td></tr></table></figure><h2 id="naver-py-작성"><a href="#naver-py-작성" class="headerlink" title="naver.py 작성"></a>naver.py 작성</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user/oauth/providers/naver.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> login</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NaverClient</span>:</span></span><br><span class="line">    client_id = settings.NAVER_CLIENT_ID</span><br><span class="line">    secret_key = settings.NAVER_SECRET_KEY</span><br><span class="line">    grant_type = <span class="string">'authorization_code'</span></span><br><span class="line"></span><br><span class="line">    auth_url = <span class="string">'https://nid.naver.com/oauth2.0/token'</span></span><br><span class="line">    profile_url = <span class="string">'https://openapi.naver.com/v1/nid/me'</span></span><br><span class="line"></span><br><span class="line">    __instance = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(cls.__instance, cls):</span><br><span class="line">            cls.__instance = super().__new__(cls, *args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> cls.__instance</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_access_token</span><span class="params">(self, state, code)</span>:</span></span><br><span class="line">        res = requests.get(self.auth_url, params=&#123;<span class="string">'client_id'</span>: self.client_id, <span class="string">'client_secret'</span>: self.secret_key, <span class="string">'grant_type'</span>: self.grant_type, <span class="string">'state'</span>: state, <span class="string">'code'</span>: code&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res.ok, res.json()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_profile</span><span class="params">(self, access_token, token_type=<span class="string">'Bearer'</span>)</span>:</span></span><br><span class="line">        res = requests.get(self.profile_url, headers=&#123;<span class="string">'Authorization'</span>: <span class="string">'&#123;&#125; &#123;&#125;'</span>.format(token_type, access_token)&#125;).json()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> res.get(<span class="string">'resultcode'</span>) != <span class="string">'00'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, res.get(<span class="string">'message'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span>, res.get(<span class="string">'response'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NaverLoginMixin</span>:</span></span><br><span class="line">    naver_client = NaverClient()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login_with_naver</span><span class="params">(self, state, code)</span>:</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 인증토근 발급</span></span><br><span class="line">        is_success, token_infos = self.naver_client.get_access_token(state, code)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> is_success:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, <span class="string">'&#123;&#125; [&#123;&#125;]'</span>.format(token_infos.get(<span class="string">'error_desc'</span>), token_infos.get(<span class="string">'error'</span>))</span><br><span class="line"></span><br><span class="line">        access_token = token_infos.get(<span class="string">'access_token'</span>)</span><br><span class="line">        refresh_token = token_infos.get(<span class="string">'refresh_token'</span>)</span><br><span class="line">        expires_in = token_infos.get(<span class="string">'expires_in'</span>)</span><br><span class="line">        token_type = token_infos.get(<span class="string">'token_type'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 네이버 프로필 얻기</span></span><br><span class="line">        is_success, profiles = self.get_naver_profile(access_token, token_type)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> is_success:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, profiles</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 사용자 생성 또는 업데이트</span></span><br><span class="line">        user, created = self.model.objects.get_or_create(email=profiles.get(<span class="string">'email'</span>))</span><br><span class="line">        <span class="keyword">if</span> created: <span class="comment"># 사용자 생성할 경우</span></span><br><span class="line">            user.set_password(<span class="literal">None</span>)</span><br><span class="line">        user.name = profiles.get(<span class="string">'nickname'</span>)</span><br><span class="line">        user.is_active = <span class="literal">True</span></span><br><span class="line">        user.save()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 로그인</span></span><br><span class="line">        login(self.request, user, <span class="string">'user.oauth.backends.NaverBackend'</span>)  <span class="comment"># NaverBackend 를 통한 인증 시도</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 세션데이터 추가</span></span><br><span class="line">        self.set_session(access_token=access_token, refresh_token=refresh_token, expires_in=expires_in, token_type=token_type)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>, user</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_naver_profile</span><span class="params">(self, access_token, token_type)</span>:</span></span><br><span class="line">        is_success, profiles = self.naver_client.get_profile(access_token, token_type)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> is_success:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, profiles</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> profile <span class="keyword">in</span> self.required_profiles:</span><br><span class="line">            <span class="keyword">if</span> profile <span class="keyword">not</span> <span class="keyword">in</span> profiles:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span>, <span class="string">'&#123;&#125;은 필수정보입니다. 정보제공에 동의해주세요.'</span>.format(profile)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>, profiles</span><br></pre></td></tr></table></figure><h2 id="인증-백엔드-작성"><a href="#인증-백엔드-작성" class="headerlink" title="인증 백엔드 작성"></a>인증 백엔드 작성</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user/oauth/backends.py</span></span><br><span class="line"><span class="comment"># NaverBackend 백엔드는 기본인증백엔드(ModelBackend) 를 상속받아 대부분의 기능들을 그대로 사용</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> get_user_model</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.backends <span class="keyword">import</span> ModelBackend</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AnonymousUser</span><br><span class="line"></span><br><span class="line">UserModel = get_user_model()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NaverBackend</span><span class="params">(ModelBackend)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">authenticate</span><span class="params">(self, request, username=None,**kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> username <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            username = kwargs.get(UserModel.USERNAME_FIELD)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = UserModel._default_manager.get_by_natural_key(username)</span><br><span class="line">        <span class="keyword">except</span> UserModel.DoesNotExist:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> self.user_can_authenticate(user):</span><br><span class="line">                <span class="keyword">return</span> user</span><br></pre></td></tr></table></figure><h2 id="urls-py-등록"><a href="#urls-py-등록" class="headerlink" title="urls.py 등록"></a>urls.py 등록</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.views <span class="keyword">import</span> SocialLoginCallbackView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># 생략</span></span><br><span class="line">    path(<span class="string">'user/login/social/&lt;provider&gt;/callback/'</span>, SocialLoginCallbackView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><img alt="결과" data-src="/img/Django/social3.PNG" class="lozad"></p><h1 id="게시판-글쓴이-연동"><a href="#게시판-글쓴이-연동" class="headerlink" title="게시판 글쓴이 연동"></a>게시판 글쓴이 연동</h1><h2 id="models-py-수정"><a href="#models-py-수정" class="headerlink" title="models.py 수정"></a>models.py 수정</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># author     = models.CharField('작성자', max_length=16, null=False)-&gt;</span></span><br><span class="line">author     = models.ForeignKey(<span class="string">'user.User'</span>, related_name=<span class="string">'articles'</span>, on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure><h2 id="views-py-수정"><a href="#views-py-수정" class="headerlink" title="views.py 수정"></a>views.py 수정</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#생략</span></span><br><span class="line"><span class="keyword">if</span> pk:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> article:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">'invalid pk'</span>)</span><br><span class="line">    <span class="keyword">elif</span> article.author != self.request.user:                             <span class="comment"># 작성자가 수정하려는 사용자와 다른 경우</span></span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">'invalid user'</span>)</span><br><span class="line"><span class="keyword">return</span> article</span><br><span class="line"></span><br><span class="line"><span class="comment"># 작성자를 현재 사용자로 설정</span></span><br><span class="line">post_data[<span class="string">'author'</span>] = self.request.user</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Django-CBV-프로젝트-3-소셜-로그인-간편로그인&quot;&gt;&lt;a href=&quot;#Django-CBV-프로젝트-3-소셜-로그인-간편로그인&quot; class=&quot;headerlink&quot; title=&quot;Django CBV 프로젝트 3. 소셜 로그인 (간편로그인
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>(Django CBV) 이메일 인증</title>
    <link href="https://khs9628.github.io/2019/09/21/CBV5/"/>
    <id>https://khs9628.github.io/2019/09/21/CBV5/</id>
    <published>2019-09-21T07:54:48.000Z</published>
    <updated>2019-09-21T10:31:28.688Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-CBV-프로젝트-3-사용자-인증-이메일-인증"><a href="#Django-CBV-프로젝트-3-사용자-인증-이메일-인증" class="headerlink" title="Django CBV 프로젝트 3. 사용자 인증 (이메일 인증)"></a>Django CBV 프로젝트 3. 사용자 인증 (이메일 인증)</h1><p><a href="https://swarf00.github.io/2018/12/14/logout.html" rel="external nofollow noopener noreferrer" target="_blank">참고 사이트</a></p><blockquote><ol><li>가입즉시 인증이메일 보내기</li><li>인증토큰 생성</li><li>사용자인증 페이지로 이동할 수 있는 링크를 포함한 인증이메일 발송</li><li>인증이메일에서 인증하기 링크 클릭 후 사용자인증 페이지로 이동</li><li>사용자인증 페이지에서 url에 포함된 사용자id와 인증토큰을 비교해서 인증</li><li>정상적인 사용자인 경우 is_active 를 True 로 변경 후 인증완료 화면 표시</li><li>비정상적인 사용자인 경우 인증실패 화면 표시하여 재인증 가능한 링크 제공</li><li>인증되지 않은 사용자의 경우 인증이메일 재발송 가능하도록 링크 제공</li></ol></blockquote><h2 id="이메일-보내기"><a href="#이메일-보내기" class="headerlink" title="이메일 보내기"></a>이메일 보내기</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EMAIL_HOST = <span class="string">'smtp.gmail.com'</span></span><br><span class="line">EMAIL_PORT = 587</span><br><span class="line">EMAIL_HOST_USER = <span class="string">'이메일'</span></span><br><span class="line">EMAIL_HOST_PASSWORD = <span class="string">'비밀번호'</span></span><br><span class="line">EMAIL_USE_TLS = True</span><br></pre></td></tr></table></figure><h2 id="화면"><a href="#화면" class="headerlink" title="화면"></a>화면</h2><ol><li><p>회원가입시 이메일 보내는 형식 지정하는 page (templates/user/email/registration_verification.html)</p></li><li><p>재 인증을 신청하는 page (templates/user/resend_verify_email.html)</p></li></ol><h2 id="models-py-수정"><a href="#models-py-수정" class="headerlink" title="models.py 수정"></a>models.py 수정</h2><p>이메일 인증을 수행시 로그인이 가능하도록<br>is_active 의 default 값을 False로 지정한다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(AbstractBaseUser, PermissionsMixin)</span>:</span></span><br><span class="line">    <span class="comment"># 생략</span></span><br><span class="line">    is_staff = models.BooleanField(</span><br><span class="line">        _(<span class="string">'staff status'</span>),</span><br><span class="line">        default=<span class="literal">False</span>,</span><br><span class="line">        help_text=_(<span class="string">'Designates whether the user can log into this admin site.'</span>),</span><br><span class="line">    )</span><br><span class="line">    is_active = models.BooleanField(</span><br><span class="line">        _(<span class="string">'active'</span>),</span><br><span class="line">        default=<span class="literal">False</span>,                 <span class="comment"># 기본값을 False 로 변경</span></span><br><span class="line">        help_text=_(</span><br><span class="line">            <span class="string">'Designates whether this user should be treated as active. '</span></span><br><span class="line">            <span class="string">'Unselect this instead of deleting accounts.'</span></span><br><span class="line">        ),</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 생략</span></span><br></pre></td></tr></table></figure><h2 id="Views-py-작성"><a href="#Views-py-작성" class="headerlink" title="Views.py 작성"></a>Views.py 작성</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># from django.contrib.auth.forms import UserCreationForm</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> get_user_model</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.views <span class="keyword">import</span> LoginView</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> CreateView, FormView</span><br><span class="line"><span class="keyword">from</span> django.views.generic.base <span class="keyword">import</span> TemplateView</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.forms <span class="keyword">import</span> UserRegistrationForm, LoginForm, VerificationEmailForm</span><br><span class="line"><span class="keyword">from</span> user.mixins <span class="keyword">import</span> VerifyEmailMixin</span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> messages</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.tokens <span class="keyword">import</span> default_token_generator</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> minitutorial <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserRegistrationView</span><span class="params">(VerifyEmailMixin, CreateView)</span>:</span> <span class="comment"># 회원가입</span></span><br><span class="line">    template_name = <span class="string">'user_model.html'</span></span><br><span class="line">    model = get_user_model()</span><br><span class="line">    form_class = UserRegistrationForm</span><br><span class="line">    success_url = <span class="string">'/user/login/'</span></span><br><span class="line">    verify_url = <span class="string">'/user/verify/'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_valid</span><span class="params">(self, form)</span>:</span></span><br><span class="line">        response = super().form_valid(form)</span><br><span class="line">        <span class="keyword">if</span> form.instance:</span><br><span class="line">            self.send_verification_email(form.instance)</span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserVerificationView</span><span class="params">(TemplateView)</span>:</span> <span class="comment"># 인증 보내기</span></span><br><span class="line"></span><br><span class="line">    model = get_user_model()</span><br><span class="line">    redirect_url = <span class="string">'/user/login/'</span></span><br><span class="line">    token_generator = default_token_generator</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.is_valid_token(**kwargs):</span><br><span class="line">            messages.info(request, <span class="string">'인증이 완료되었습니다.'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            messages.error(request, <span class="string">'인증이 실패되었습니다.'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(self.redirect_url)   <span class="comment"># 인증 성공여부와 상관없이 무조건 로그인 페이지로 이동</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_valid_token</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        token = kwargs.get(<span class="string">'token'</span>)</span><br><span class="line">        user = self.model.objects.get(pk=pk)</span><br><span class="line">        is_valid = self.token_generator.check_token(user, token)</span><br><span class="line">        <span class="keyword">if</span> is_valid:</span><br><span class="line">            user.is_active = <span class="literal">True</span></span><br><span class="line">            user.save()     <span class="comment"># 데이터가 변경되면 반드시 save() 메소드 호출</span></span><br><span class="line">        <span class="keyword">return</span> is_valid</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResendVerifyEmailView</span><span class="params">(VerifyEmailMixin, FormView)</span>:</span> <span class="comment"># 재 인증 보내기</span></span><br><span class="line">    model = get_user_model()</span><br><span class="line">    form_class = VerificationEmailForm</span><br><span class="line">    success_url = <span class="string">'/user/login/'</span></span><br><span class="line">    template_name = <span class="string">'user/resend_verify_email.html'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_valid</span><span class="params">(self, form)</span>:</span></span><br><span class="line">        email = form.cleaned_data[<span class="string">'email'</span>]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = self.model.objects.get(email=email)</span><br><span class="line">        <span class="keyword">except</span> self.model.DoesNotExist:</span><br><span class="line">            messages.error(self.request, <span class="string">'알 수 없는 사용자 입니다.'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.send_verification_email(user)</span><br><span class="line">        <span class="keyword">return</span> super().form_valid(form)</span><br></pre></td></tr></table></figure><h2 id="mixins-py-추가"><a href="#mixins-py-추가" class="headerlink" title="mixins.py 추가"></a>mixins.py 추가</h2><p><code>UserRegistrationView</code> 와 <code>ResendVerifyEmailView</code>의 기본 메소드(인증보내기)를 지정해서<br>코드를 단순화 시켜준다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> messages</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.tokens <span class="keyword">import</span> default_token_generator</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> minitutorial <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VerifyEmailMixin</span>:</span></span><br><span class="line">    email_template_name = <span class="string">'user/email/registration_verification.html'</span></span><br><span class="line">    token_generator = default_token_generator</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_verification_email</span><span class="params">(self, user)</span>:</span></span><br><span class="line">        token = self.token_generator.make_token(user)</span><br><span class="line">        url = self.build_verification_link(user, token)</span><br><span class="line">        subject = <span class="string">'회원가입을 축하드립니다.'</span></span><br><span class="line">        message = <span class="string">'다음 주소로 이동하셔서 인증하세요. &#123;&#125;'</span>.format(url)</span><br><span class="line">        html_message = render(self.request, self.email_template_name, &#123;<span class="string">'url'</span>: url&#125;).content.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        user.email_user(subject, message, from_email=settings.EMAIL_HOST_USER,html_message=html_message)</span><br><span class="line">        messages.info(self.request, <span class="string">'가입하신 이메일주소로 인증메일을 발송했으니 확인 후 인증해주세요.'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build_verification_link</span><span class="params">(self, user, token)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&#123;&#125;/user/&#123;&#125;/verify/&#123;&#125;/'</span>.format(self.request.META.get(<span class="string">'HTTP_ORIGIN'</span>), user.pk, token)</span><br></pre></td></tr></table></figure><h2 id="validators-py-작성"><a href="#validators-py-작성" class="headerlink" title="validators.py 작성"></a>validators.py 작성</h2><p>이메일 재전송 시 이미 승인 받은 회원이나<br>가입되지 않은 회원에 대한 정보를 handling</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> get_user_model</span><br><span class="line"><span class="keyword">from</span> django.core.exceptions <span class="keyword">import</span> ValidationError</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegisteredEmailValidator</span>:</span></span><br><span class="line">    user_model = get_user_model()</span><br><span class="line">    code = <span class="string">'invalid'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, email)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = self.user_model.objects.get(email=email)</span><br><span class="line">        <span class="keyword">except</span> self.user_model.DoesNotExist:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">'가입되지 않은 이메일입니다.'</span>, code=self.code)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> user.is_active:</span><br><span class="line">                <span class="keyword">raise</span> ValidationError(<span class="string">'이미 인증되어 있습니다.'</span>, code=self.code)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><h2 id="forms-py-작성"><a href="#forms-py-작성" class="headerlink" title="forms.py 작성"></a>forms.py 작성</h2><p>validator로 검증한 결과를 화면에 넘겨줌</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.validators <span class="keyword">import</span> RegisteredEmailValidator</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VerificationEmailForm</span><span class="params">(forms.Form)</span>:</span></span><br><span class="line">    email = EmailField(widget=forms.EmailInput(attrs=&#123;<span class="string">'autofocus'</span>: <span class="literal">True</span>&#125;), validators=(EmailField.default_validators + [RegisteredEmailValidator()]))</span><br></pre></td></tr></table></figure><h2 id="registration-verification-html"><a href="#registration-verification-html" class="headerlink" title="registration_verification.html"></a>registration_verification.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; min-height: 150px; padding-top: 5px; padding-right: 5px; padding-bottom: 5px; padding-left: 5px; width: 100%; height: 100%; background-color: rgb(234, 236, 237); font-family: Arial Black, Gadget, sans-serif;"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">bgcolor</span>=<span class="string">"rgb(234, 236, 237)"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; vertical-align: top;"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; font-family: Helvetica, serif; min-height: 150px; padding-top: 5px; padding-right: 5px; padding-bottom: 5px; padding-left: 5px; margin-top: auto; margin-right: auto; margin-bottom: auto; margin-left: auto; height: 0px; width: 90%; max-width: 550px;"</span> <span class="attr">width</span>=<span class="string">"90%"</span> <span class="attr">height</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; vertical-align: top; font-size: medium; padding-bottom: 50px;"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; min-height: 150px; padding-top: 5px; padding-right: 5px; padding-bottom: 5px; padding-left: 5px; margin-bottom: 20px; height: 0px;"</span> <span class="attr">height</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; background-color: rgb(255, 255, 255); overflow-x: hidden; overflow-y: hidden; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-align: center;"</span> <span class="attr">bgcolor</span>=<span class="string">"rgb(255, 255, 255)"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; width: 100%; min-height: 150px; padding-top: 5px; padding-right: 5px; padding-bottom: 5px; padding-left: 5px; height: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; border-collapse: collapse;"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                              <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; font-size: 13px; line-height: 20px; color: rgb(111, 119, 125); padding-top: 10px; padding-right: 20px; padding-bottom: 0px; padding-left: 20px; vertical-align: top;"</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; font-size: 25px; font-weight: 300; color: rgb(68, 68, 68);"</span>&gt;</span></span><br><span class="line">                                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; font-family: Arial,Helvetica,sans-serif;"</span>&gt;</span>가입을 환영합니다.!!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; font-family: Arial,Helvetica,sans-serif;"</span>&gt;</span>회원님이 가입하신 것이 맞다면 아래 "승인" 버튼을 눌러서 인증해주세요. 가입하신 적이 없을 경우 인증하기를 누르지 마시고 무시하세요.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; margin-top: 0px; margin-right: auto; margin-bottom: 10px; margin-left: auto; padding-top: 5px; padding-right: 5px; padding-bottom: 5px; padding-left: 5px; width: 100%;"</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">                                  <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; padding-top: 20px; padding-right: 0px; padding-bottom: 20px; padding-left: 0px; text-align: center;"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url &#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"button"</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box; font-size: 20px; background-color: rgb(217, 131, 166); color: rgb(255, 255, 255); text-align: center; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; font-family: Arial, Helvetica, sans-serif; font-weight: 500; text-decoration: underline;"</span>&gt;</span>승인<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                                  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                              <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 생략 --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="resend-verify-email-html"><a href="#resend-verify-email-html" class="headerlink" title="resend_verify_email.html"></a>resend_verify_email.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;<span class="tag">&lt;<span class="name">title</span>&gt;</span>인증메일 다시보내기<span class="tag">&lt;/<span class="name">title</span>&gt;</span>&#123;% endblock %&#125;</span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.registration</span> &#123;</span></span><br><span class="line">        width: 360px;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">    &#125;</span><br><span class="line">    p &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line">    label &#123;</span><br><span class="line">        width: 50%;</span><br><span class="line">        text-align: left;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.control-label</span> &#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.registration</span> <span class="selector-class">.form-actions</span> &gt; <span class="selector-tag">button</span> &#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.link-below-button</span> &#123; <span class="attribute">margin-top</span>: <span class="number">10px</span>; <span class="attribute">text-align</span>: right;&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">&#123;% endblock css %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 생략 --&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-default registration"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line">        인증이메일 보내기</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"."</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">            &#123;% csrf_token %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span>재발송할 이메일주소를 입력해주세요.<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">            &#123;% for field in form %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group &#123;% if field.errors|length &gt; 0 %&#125;has-error&#123;%endif %&#125;"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"&#123;&#123; field.id_for_label &#125;&#125;"</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"&#123;&#123; field.html_name &#125;&#125;"</span> <span class="attr">id</span>=<span class="string">"&#123;&#123; field.id_for_lable &#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"&#123;&#123; field.field.widget.input_type &#125;&#125;"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; field.value|default_if_none:'' &#125;&#125;"</span>&gt;</span></span><br><span class="line">                    &#123;% for error in field.errors %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"control-label"</span> <span class="attr">for</span>=<span class="string">"&#123;&#123; field.id_for_label &#125;&#125;"</span>&gt;</span>&#123;&#123; error &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-actions"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-large"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>인증이메일 보내기<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock content %&#125;</span><br></pre></td></tr></table></figure><h2 id="로그아웃"><a href="#로그아웃" class="headerlink" title="로그아웃"></a>로그아웃</h2><p>settings.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOGOUT_REDIRECT_URL = <span class="string">'/article/'</span></span><br></pre></td></tr></table></figure><p>urls.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.views <span class="keyword">import</span> LogoutView</span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'user/logout/'</span>, LogoutView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><img alt="실행결과" data-src="/img/Django/register_email.PNG" class="lozad"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Django-CBV-프로젝트-3-사용자-인증-이메일-인증&quot;&gt;&lt;a href=&quot;#Django-CBV-프로젝트-3-사용자-인증-이메일-인증&quot; class=&quot;headerlink&quot; title=&quot;Django CBV 프로젝트 3. 사용자 인증 (이메일
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>(Django CBV) 로그인</title>
    <link href="https://khs9628.github.io/2019/09/21/CBV4/"/>
    <id>https://khs9628.github.io/2019/09/21/CBV4/</id>
    <published>2019-09-21T06:49:39.000Z</published>
    <updated>2019-09-22T09:57:24.934Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-CBV-프로젝트-3-사용자-인증-로그인"><a href="#Django-CBV-프로젝트-3-사용자-인증-로그인" class="headerlink" title="Django CBV 프로젝트 3. 사용자 인증 (로그인)"></a>Django CBV 프로젝트 3. 사용자 인증 (로그인)</h1><p><a href="https://swarf00.github.io/2018/12/10/login.html" rel="external nofollow noopener noreferrer" target="_blank">참고 사이트</a></p><h2 id="Views-py"><a href="#Views-py" class="headerlink" title="Views.py"></a>Views.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 추가</span></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> get_user_model</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.views <span class="keyword">import</span> LoginView</span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> User <span class="comment"># 모델 import</span></span><br><span class="line"><span class="keyword">from</span> user.forms <span class="keyword">import</span> UserRegistrationForm, LoginForm <span class="comment"># form import</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> messages <span class="comment">#메세지 framework사용</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserLoginView</span><span class="params">(LoginView)</span>:</span>           <span class="comment"># 로그인</span></span><br><span class="line">    template_name = <span class="string">'user/login_form.html'</span></span><br><span class="line">    authentication_form = LoginForm</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">form_invalid</span><span class="params">(self, form)</span>:</span></span><br><span class="line">        messages.error(self.request, <span class="string">'로그인에 실패하였습니다.'</span>, extra_tags=<span class="string">'danger'</span>)</span><br><span class="line">        <span class="keyword">return</span> super().form_invalid(form)</span><br></pre></td></tr></table></figure><h2 id="urls-py"><a href="#urls-py" class="headerlink" title="urls.py"></a>urls.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'user/login/'</span>, UserLoginView.as_view()), <span class="comment"># +</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="forms-py"><a href="#forms-py" class="headerlink" title="forms.py"></a>forms.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 추가</span></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.forms <span class="keyword">import</span> UserCreationForm, AuthenticationForm</span><br><span class="line"><span class="keyword">from</span> django.forms <span class="keyword">import</span> EmailField</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginForm</span><span class="params">(AuthenticationForm)</span>:</span></span><br><span class="line">    username = EmailField(widget=forms.EmailInput(attrs=&#123;<span class="string">'autofocus'</span>: <span class="literal">True</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment"># field -&gt; 유효성 검증과 위젯의 기능들을 호출</span></span><br><span class="line"><span class="comment"># widget -&gt; 필드의 실제 렌더링</span></span><br></pre></td></tr></table></figure><h2 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a>settings.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LOGIN_URL = <span class="string">'/user/login/'</span> <span class="comment"># 게시판에 로그인 사용자만 가능하게하기 위해 지정</span></span><br><span class="line">LOGIN_REDIRECT_URL = <span class="string">'/article/'</span>  <span class="comment"># 로그인이 되면 /article/로 이동</span></span><br></pre></td></tr></table></figure><h2 id="user-login-form-html"><a href="#user-login-form-html" class="headerlink" title="user/login_form.html"></a>user/login_form.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;<span class="tag">&lt;<span class="name">title</span>&gt;</span>로그인<span class="tag">&lt;/<span class="name">title</span>&gt;</span>&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.registration</span> &#123;</span></span><br><span class="line">        width: 360px;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">    &#125;</span><br><span class="line">    p &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line">    label &#123;</span><br><span class="line">        width: 50%;</span><br><span class="line">        text-align: left;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.control-label</span> &#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.registration</span> <span class="selector-class">.form-actions</span> &gt; <span class="selector-tag">button</span> &#123;</span></span><br><span class="line">        width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">&#123;% endblock css %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-default registration"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line">        로그인하기</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"."</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">            &#123;% csrf_token %&#125;</span><br><span class="line">            &#123;% for field in form %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group &#123;% if field.errors|length &gt; 0 %&#125;has-error&#123;%endif %&#125;"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"&#123;&#123; field.id_for_label &#125;&#125;"</span>&gt;</span>&#123;&#123; field.label &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"&#123;&#123; field.html_name &#125;&#125;"</span> <span class="attr">id</span>=<span class="string">"&#123;&#123; field.id_for_lable &#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"&#123;&#123; field.field.widget.input_type &#125;&#125;"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; field.value|default_if_none:'' &#125;&#125;"</span>&gt;</span></span><br><span class="line">                    &#123;% for error in field.errors %&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"control-label"</span> <span class="attr">for</span>=<span class="string">"&#123;&#123; field.id_for_label &#125;&#125;"</span>&gt;</span>&#123;&#123; error &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-actions"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-large"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>로그인하기<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock content %&#125;</span><br></pre></td></tr></table></figure><h2 id="중요-Session"><a href="#중요-Session" class="headerlink" title="(중요) Session ??"></a>(중요) Session ??</h2><p>로그인한 사용자에게만 발급하는 일종의 표딱지 사용권</p><p><code>장고의 세션</code> -&gt; </p><h3 id="세션-미들웨어-여러가지-세션-백엔드-중-하나를-선택해서-백엔드에게-실제-저장기능을-위임"><a href="#세션-미들웨어-여러가지-세션-백엔드-중-하나를-선택해서-백엔드에게-실제-저장기능을-위임" class="headerlink" title="세션 미들웨어 : 여러가지 세션 백엔드 중 하나를 선택해서 백엔드에게 실제 저장기능을 위임"></a>세션 미들웨어 : 여러가지 세션 백엔드 중 하나를 선택해서 백엔드에게 실제 저장기능을 위임</h3><table><thead><tr><th align="left">세션 백엔드 모듈이름</th><th align="left">기능</th></tr></thead><tbody><tr><td align="left">django.contrib.sessions.backends.db</td><td align="left">데이터베이스에 저장하는백엔드</td></tr><tr><td align="left">django.contrib.sessions.backends.cache</td><td align="left">캐시에 저장하는 백엔드</td></tr><tr><td align="left">django.contrib.sessions.backends.cache_db</td><td align="left">캐시와 데이터베이스를 병행하는 백엔드</td></tr><tr><td align="left">django.contrib.sessions.backends.file</td><td align="left">파일에 저장하는 백엔드</td></tr><tr><td align="left">django.contrib.sessions.backends.signed_cookie</td><td align="left">쿠키에 저장하는 백엔드</td></tr></tbody></table><hr><blockquote><p>사용자가 요청을 할 때마다 쿠키의 <code>sessionid</code> 를 확인 후 세션 백엔드 세션데이터를 불러와 <code>request.session</code> 객체에 저장 ,만일 세션데이터가 유효하지 않다면(expire_date, path 등) 빈 세션데이터만 저장</p></blockquote><blockquote><p>cf) 세션데이터는 사용자가 매 요청마다 불러와야 하는 값이고 응답할 때까지 메모리에 저장하고 있어야 하기 때문에 너무 많은 데이터를 가지고 있으면 서버의 가용성에 지장이 생길 수 있습니다. 대부분의 사용자가 매번 필요한 데이터일 경우에만 세션객체에 추가하셔야 합니다.</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Django-CBV-프로젝트-3-사용자-인증-로그인&quot;&gt;&lt;a href=&quot;#Django-CBV-프로젝트-3-사용자-인증-로그인&quot; class=&quot;headerlink&quot; title=&quot;Django CBV 프로젝트 3. 사용자 인증 (로그인)&quot;&gt;&lt;/a
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>(Django CBV) 회원가입</title>
    <link href="https://khs9628.github.io/2019/09/21/CBV3/"/>
    <id>https://khs9628.github.io/2019/09/21/CBV3/</id>
    <published>2019-09-21T05:12:36.000Z</published>
    <updated>2019-09-22T09:57:09.386Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-CBV-프로젝트-3-사용자-인증-회원가입"><a href="#Django-CBV-프로젝트-3-사용자-인증-회원가입" class="headerlink" title="Django CBV 프로젝트 3. 사용자 인증 (회원가입)"></a>Django CBV 프로젝트 3. 사용자 인증 (회원가입)</h1><p><a href="https://swarf00.github.io/2018/12/07/registration.html" rel="external nofollow noopener noreferrer" target="_blank">참고 사이트</a></p><h2 id="구조"><a href="#구조" class="headerlink" title="구조"></a>구조</h2><pre><code># APPuser/├── __init__.py      # 앱 패키지 초기화 스크립트입니다.├── admin.py         # 장고 어드민 설정파일입니다. 어드민에 등록된 모델은 장고에서 자동 생성하는 어드민 페이지에서 관리할 수 있습니다.├── apps.py          # 앱 설정 파일입니다.└── migrations/      # 데이터베이스 마이그레이션 디렉토리. 장고 ORM은 모델 스키마의 변화가 생길 때마다 migration 파일을 생성하고 이것을 통해 스키마를 업데이트 합니다. migration 파일을 통해 협업자들과 함께 데이터베이스의 스키마를 동기화할 수 있습니다.    ├── __init__.py  # 마이그레이션 패키지 초기화 스크립트입니다.    ├── models.py        # 앱 모델 파일입니다. 회원의 모든 데이터를 저장할 데이터베이스를 장고 ORM을 통해 모델화합니다.    ├── tests.py         # 앱 내의 기능들을 테스트하는 기능을 구현하는 파일입니다.    ├── views.py         # 앱의 화면(template)과 데이터(model) 사이에서 사용자의 요청을 처리하여 모델에 저장하고, 모델에 저장된 데이터를 화면에 전달하는 역할을 합니다.    ├── mixins.py        # 기본 메소드(인증보내기)를 지정해서 코드를 단순화 합니다.    ├── validators.py    # 객체를 검증할 수 있는 기능을 제공 합니다.               ├── forms.py         # 앱의 form의 인자와 화면단을 구성해주는 파일입니다.    └── templates/user/            ├── login_form.html                # 로그인 form html            ├── resend_verify_email.html       # 재 인증 메일 form html                   ├── user_form.html                 # 회원가입 form html            └── /email                └── registration_verification.html      # 사용자 email 보낼 때 form html</code></pre><h2 id="장고-auth-프레임워크"><a href="#장고-auth-프레임워크" class="headerlink" title="장고 auth 프레임워크?"></a>장고 auth 프레임워크?</h2><p><code>가입</code>, <code>로그인</code>, <code>로그아웃</code> 지원</p><p><strong>사용자 인증</strong> </p><ol><li>사용자정보를 데이터베이스에 저장</li><li>저장된 데이터를 구분할 수 있는 유일한(누구와도 중복되지 않는) 키(key)를 지정해서 사용자를 식별(구별)</li><li>비밀번호 암호화 (해싱함수 / 암호화)</li></ol><blockquote><p>cf) 암호화와 해시<br>공통점 - 원래의 텍스트(평문)을 알아볼 수 없는 텍스트(암호문)으로 변경시켜줍니다.<br>차이점 - 암호화는 암호문에서 평문으로 되돌릴 수 있지만 해시는 되돌릴 수 없습니다.<br>암호 알고리즘의 종류 - <code>des</code>, <code>aes</code>, <code>seed</code>, <code>rsa</code> 등<br>해시 알고리즘의 종류 - <code>md5</code>, <code>sha1</code>, <code>sha256</code>, <code>sha256</code> 등</p></blockquote><h2 id="user-App-생성"><a href="#user-App-생성" class="headerlink" title="user App 생성"></a>user App 생성</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp user</span><br></pre></td></tr></table></figure><h2 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a>settings.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'django.contrib.auth'</span>, <span class="comment"># auth 프레임워크</span></span><br><span class="line">     <span class="comment"># --------- #</span></span><br><span class="line">    <span class="string">'bbs'</span>, <span class="comment"># 게시판 app</span></span><br><span class="line">    <span class="string">'user'</span>, <span class="comment"># user 정보 app</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>cf) DB가 잘못 되었을 때 데이터 삭제<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -path <span class="string">"*/migrations/*.py"</span> -not -name <span class="string">"__init__.py"</span> -delete</span><br><span class="line"><span class="comment"># + db.splite3 파일삭제</span></span><br></pre></td></tr></table></figure></p><h2 id="회원-정보-모델-설계-models-py"><a href="#회원-정보-모델-설계-models-py" class="headerlink" title="회원 정보 모델 설계 (models.py)"></a>회원 정보 모델 설계 (models.py)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> (</span><br><span class="line">    AbstractBaseUser, PermissionsMixin, UserManager</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.base_user <span class="keyword">import</span> AbstractBaseUser, BaseUserManager</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> PermissionsMixin</span><br><span class="line"><span class="keyword">from</span> django.core.mail <span class="keyword">import</span> send_mail</span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.utils <span class="keyword">import</span> timezone</span><br><span class="line"><span class="keyword">from</span> django.utils.translation <span class="keyword">import</span> ugettext_lazy <span class="keyword">as</span> _</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span><span class="params">(BaseUserManager)</span>:</span></span><br><span class="line">    use_in_migrations = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_create_user</span><span class="params">(self, email, password, **extra_fields)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> email:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'The given email must be set'</span>)</span><br><span class="line">        email = self.normalize_email(email)</span><br><span class="line">        user = self.model(email=email, **extra_fields)</span><br><span class="line">        user.set_password(password)</span><br><span class="line">        user.save(using=self._db)</span><br><span class="line">        <span class="keyword">return</span> user</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_user</span><span class="params">(self, email=None, password=None, **extra_fields)</span>:</span></span><br><span class="line">        extra_fields.setdefault(<span class="string">'is_staff'</span>, <span class="literal">False</span>)</span><br><span class="line">        extra_fields.setdefault(<span class="string">'is_superuser'</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> self._create_user(email, password, **extra_fields)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_superuser</span><span class="params">(self, email, password, **extra_fields)</span>:</span></span><br><span class="line">        extra_fields.setdefault(<span class="string">'is_staff'</span>, <span class="literal">True</span>)</span><br><span class="line">        extra_fields.setdefault(<span class="string">'is_superuser'</span>, <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> extra_fields.get(<span class="string">'is_staff'</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'Superuser must have is_staff=True.'</span>)</span><br><span class="line">        <span class="keyword">if</span> extra_fields.get(<span class="string">'is_superuser'</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'Superuser must have is_superuser=True.'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self._create_user(email, password, **extra_fields)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(AbstractBaseUser, PermissionsMixin)</span>:</span></span><br><span class="line">    email = models.EmailField(<span class="string">'email'</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    name = models.CharField(<span class="string">'이름'</span>, max_length=<span class="number">30</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    is_staff = models.BooleanField(<span class="string">'스태프 권한'</span>, default=<span class="literal">False</span>)</span><br><span class="line">    is_active = models.BooleanField(<span class="string">'사용중'</span>, default=<span class="literal">True</span>)</span><br><span class="line">    date_joined = models.DateTimeField(<span class="string">'가입일'</span>, default=timezone.now)</span><br><span class="line"></span><br><span class="line">    objects = UserManager()</span><br><span class="line">    </span><br><span class="line">    USERNAME_FIELD = <span class="string">'email'</span>                     <span class="comment"># email을 사용자의 식별자로 설정</span></span><br><span class="line">    REQUIRED_FIELDS = [<span class="string">'name'</span>]                   <span class="comment"># 필수입력값</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = _(<span class="string">'user'</span>)</span><br><span class="line">        verbose_name_plural = _(<span class="string">'users'</span>)</span><br><span class="line">        swappable = <span class="string">'AUTH_USER_MODEL'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">email_user</span><span class="params">(self, subject, message, from_email=None, **kwargs)</span>:</span> <span class="comment"># 이메일 발송 메소드</span></span><br><span class="line">        send_mail(subject, message, from_email, [self.email], **kwargs)</span><br></pre></td></tr></table></figure><h2 id="회원가입-폼을-지정-forms-py"><a href="#회원가입-폼을-지정-forms-py" class="headerlink" title="회원가입 폼을 지정(forms.py)"></a>회원가입 폼을 지정(forms.py)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> get_user_model</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.forms <span class="keyword">import</span> UserCreationForm</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserRegistrationForm</span><span class="params">(UserCreationForm)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = get_user_model()</span><br><span class="line">        fields = (<span class="string">'email'</span>, <span class="string">'name'</span>)</span><br></pre></td></tr></table></figure><h2 id="회원가입-Class-작성-views-py"><a href="#회원가입-Class-작성-views-py" class="headerlink" title="회원가입 Class 작성(views.py)"></a>회원가입 Class 작성(views.py)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.forms <span class="keyword">import</span> UserCreationForm</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> CreateView</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.forms <span class="keyword">import</span> UserRegistrationForm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserRegistrationView</span><span class="params">(CreateView)</span>:</span></span><br><span class="line">    template_name = <span class="string">'user_model.html'</span></span><br><span class="line">    model = User</span><br><span class="line">    form_class = UserRegistrationForm</span><br><span class="line">    success_url = <span class="string">'/article/'</span> <span class="comment">#회원가입을 성공한다면 이 url로 이동해라</span></span><br></pre></td></tr></table></figure><h2 id="회원가입-setting-설정-settings-py"><a href="#회원가입-setting-설정-settings-py" class="headerlink" title="회원가입 setting 설정 (settings.py)"></a>회원가입 setting 설정 (settings.py)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">AUTH_PASSWORD_VALIDATORS = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'</span>,</span><br><span class="line">        <span class="string">'OPTION'</span>: &#123;<span class="string">'user_attributes'</span>: (<span class="string">'email'</span>, <span class="string">'name'</span>)&#125;, </span><br><span class="line">        <span class="comment">#forms.py에서 email과 name만 지정했기 때문에</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#생략</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AUTH_USER_MODEL = <span class="string">'user.User'</span>        <span class="comment"># '앱label.모델명'</span></span><br></pre></td></tr></table></figure><p><img alt="실행화면" data-src="/img/Django/registerCBV.PNG" class="lozad"></p><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Django-CBV-프로젝트-3-사용자-인증-회원가입&quot;&gt;&lt;a href=&quot;#Django-CBV-프로젝트-3-사용자-인증-회원가입&quot; class=&quot;headerlink&quot; title=&quot;Django CBV 프로젝트 3. 사용자 인증 (회원가입)&quot;&gt;
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>(Django CBV) 게시판</title>
    <link href="https://khs9628.github.io/2019/09/21/CBV2/"/>
    <id>https://khs9628.github.io/2019/09/21/CBV2/</id>
    <published>2019-09-20T15:59:54.000Z</published>
    <updated>2019-09-21T06:48:58.818Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-CBV-프로젝트-2-세부-코딩"><a href="#Django-CBV-프로젝트-2-세부-코딩" class="headerlink" title="Django CBV 프로젝트 2. 세부 코딩"></a>Django CBV 프로젝트 2. 세부 코딩</h1><p><a href="https://swarf00.github.io/2018/11/23/get-started.html" rel="external nofollow noopener noreferrer" target="_blank">참고 사이트</a></p><h2 id="Model-py"><a href="#Model-py" class="headerlink" title="Model.py"></a>Model.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    title      = models.CharField(<span class="string">'타이틀'</span>, max_length=<span class="number">126</span>, null=<span class="literal">False</span>)</span><br><span class="line">    content    = models.TextField(<span class="string">'내용'</span>, null=<span class="literal">False</span>)</span><br><span class="line">    author     = models.CharField(<span class="string">'작성자'</span>, max_length=<span class="number">16</span>, null=<span class="literal">False</span>)</span><br><span class="line">    created_at = models.DateTimeField(<span class="string">'작성일'</span>, auto_now_add=<span class="literal">True</span>)</span><br><span class="line">    created_at.editable = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'[&#123;&#125;] &#123;&#125;'</span>.format(self.id, self.title)</span><br></pre></td></tr></table></figure><h2 id="Views-py"><a href="#Views-py" class="headerlink" title="Views.py"></a>Views.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bbs/views.py - CBV(Class Based View)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse, HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> TemplateView</span><br><span class="line"><span class="keyword">from</span> bbs.models <span class="keyword">import</span> Article</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.utils.decorators <span class="keyword">import</span> method_decorator</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> messages</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleListView</span><span class="params">(TemplateView)</span>:</span></span><br><span class="line">    template_name = <span class="string">'article_list.html'</span>    <span class="comment"># 뷰 전용 템플릿 생성.</span></span><br><span class="line">    queryset = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        print(request.GET)</span><br><span class="line">        ctx = &#123;</span><br><span class="line">            <span class="string">'view'</span>: self.__class__.__name__, <span class="comment"># 클래스의 이름</span></span><br><span class="line">            <span class="string">'articles'</span>: self.get_queryset()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.queryset:</span><br><span class="line">            self.queryset = Article.objects.all()</span><br><span class="line">        <span class="keyword">return</span> self.queryset</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleDetailView</span><span class="params">(TemplateView)</span>:</span>       <span class="comment"># 게시글 상세</span></span><br><span class="line">    template_name = <span class="string">'article_detail.html'</span></span><br><span class="line">    queryset = Article.objects.all()</span><br><span class="line">    pk_url_kwargs = <span class="string">'article_id'</span>                 <span class="comment"># 검색데이터의 primary key를 전달받을 이름</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_object</span><span class="params">(self, queryset=None)</span>:</span></span><br><span class="line">        queryset = queryset <span class="keyword">or</span> self.queryset     <span class="comment"># queryset 파라미터 초기화</span></span><br><span class="line">        pk = self.kwargs.get(self.pk_url_kwargs) <span class="comment"># pk는 모델에서 정의된 pk값, 즉 모델의 id</span></span><br><span class="line">        <span class="keyword">return</span> queryset.filter(pk=pk).first()    <span class="comment"># pk로 검색된 데이터가 있다면 그 중 첫번째 데이터 없다면 None 반환</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> article:</span><br><span class="line">            <span class="keyword">raise</span> Http404(<span class="string">'invalid pk'</span>)</span><br><span class="line">        <span class="keyword">return</span> article</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        article = self.get_object()</span><br><span class="line">        </span><br><span class="line">        ctx = &#123;</span><br><span class="line">            <span class="string">'view'</span>: self.__class__.__name__, <span class="comment"># 클래스의 이름</span></span><br><span class="line">            <span class="string">'article'</span>: article</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br><span class="line"></span><br><span class="line"><span class="meta">@method_decorator(csrf_exempt, name='dispatch')   # 모든 핸들러 예외 처리</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleCreateUpdateView</span><span class="params">(TemplateView)</span>:</span>  <span class="comment"># 게시글 추가, 수정</span></span><br><span class="line">    template_name = <span class="string">'article_update.html'</span></span><br><span class="line">    queryset = Article.objects.all()</span><br><span class="line">    pk_url_kwargs = <span class="string">'article_id'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_object</span><span class="params">(self, queryset=None)</span>:</span></span><br><span class="line">        queryset = queryset <span class="keyword">or</span> self.queryset</span><br><span class="line">        pk = self.kwargs.get(self.pk_url_kwargs)</span><br><span class="line">        article = queryset.filter(pk=pk).first()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pk <span class="keyword">and</span> <span class="keyword">not</span> article:                    <span class="comment"># 검색결과가 없으면 곧바로 에러 발생</span></span><br><span class="line">            <span class="keyword">raise</span> Http404(<span class="string">'invalid pk'</span>)</span><br><span class="line">        <span class="keyword">return</span> article</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        article = self.get_object()</span><br><span class="line">        </span><br><span class="line">        ctx = &#123;</span><br><span class="line">            <span class="string">'article'</span>: article</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        action = request.POST.get(<span class="string">'action'</span>)           <span class="comment"># request.POST 객체에서 데이터 얻기</span></span><br><span class="line">        post_data = &#123;key: request.POST.get(key) <span class="keyword">for</span> key <span class="keyword">in</span> (<span class="string">'title'</span>, <span class="string">'content'</span>, <span class="string">'author'</span>)&#125;</span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> post_data:                         <span class="comment"># 세가지 데이터 모두 있어야 통과</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> post_data[key]:</span><br><span class="line">                messages.error(self.request, <span class="string">'&#123;&#125; 값이 존재하지 않습니다.'</span>.format(key), extra_tags=<span class="string">'danger'</span>) <span class="comment"># error 레벨로 메시지 저장</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> len(messages.get_messages(request)) == <span class="number">0</span>:                  <span class="comment"># 메시지가 있다면 아무것도 처리하지 않음</span></span><br><span class="line">            <span class="keyword">if</span> action == <span class="string">'create'</span>:  <span class="comment"># action이 create일 경우</span></span><br><span class="line">                article = Article.objects.create(**post_data)</span><br><span class="line">                messages.success(self.request, <span class="string">'게시글이 저장되었습니다.'</span>)  <span class="comment"># success 레벨로 메시지 저장</span></span><br><span class="line">            <span class="keyword">elif</span> action == <span class="string">'update'</span>: <span class="comment"># action이 update일 경우</span></span><br><span class="line">                article = self.get_object()</span><br><span class="line">                <span class="keyword">for</span> key, value <span class="keyword">in</span> post_data.items():</span><br><span class="line">                    setattr(article, key, value)</span><br><span class="line">                article.save()</span><br><span class="line">                messages.success(self.request, <span class="string">'게시글이 성공적으로 수정되었습니다.'</span>, extra_tags=<span class="string">'info'</span>)  <span class="comment"># info 레벨로 메시지 저장</span></span><br><span class="line">            <span class="keyword">else</span>: <span class="comment"># action이 없거나 create, update 중 하나가 아닐 경우</span></span><br><span class="line">                messages.error(self.request, <span class="string">'알 수 없는 요청입니다.'</span>, extra_tags=<span class="string">'danger'</span>)     <span class="comment"># error 레벨로 메시지 저장</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> HttpResponseRedirect(<span class="string">'/article/'</span>) <span class="comment"># 정상적인 저장이 완료되면 '/articles/'로 이동됨</span></span><br><span class="line">        </span><br><span class="line">        ctx = &#123;</span><br><span class="line">            <span class="string">'article'</span>: self.get_object() <span class="keyword">if</span> action == <span class="string">'update'</span> <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br></pre></td></tr></table></figure><h2 id="minitutorial-urls-py"><a href="#minitutorial-urls-py" class="headerlink" title="minitutorial/urls.py"></a>minitutorial/urls.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bbs.views <span class="keyword">import</span> ArticleListView, ArticleDetailView, ArticleCreateUpdateView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'article/'</span>, ArticleListView.as_view()),</span><br><span class="line">    path(<span class="string">'article/create/'</span>, ArticleCreateUpdateView.as_view()),</span><br><span class="line">    path(<span class="string">'article/&lt;article_id&gt;/'</span>, ArticleDetailView.as_view()),</span><br><span class="line">    path(<span class="string">'article/&lt;article_id&gt;/update/'</span>, ArticleCreateUpdateView.as_view()),</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="프론트-Templates"><a href="#프론트-Templates" class="headerlink" title="프론트 (Templates)"></a>프론트 (Templates)</h1><h2 id="Templates-base-html"><a href="#Templates-base-html" class="headerlink" title="Templates/base.html"></a>Templates/base.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"ko"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        &#123;% block title %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>bbs - minitutorial<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        &#123;% endblock title %&#125;</span><br><span class="line"></span><br><span class="line">        &#123;% block meta %&#125;</span><br><span class="line">        &#123;% endblock meta %&#125;</span><br><span class="line"></span><br><span class="line">        &#123;% block scripts %&#125;</span><br><span class="line">        &#123;% endblock scripts %&#125;</span><br><span class="line"></span><br><span class="line">        &#123;% block css %&#125;</span><br><span class="line">        &#123;% endblock css %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block header %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-default"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-header"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span> <span class="attr">href</span>=<span class="string">"/article/"</span>&gt;</span>게시글 목록<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    &#123;% if messages %&#125;    <span class="comment">&lt;!-- 추가된 부분 시작 --&gt;</span></span><br><span class="line">        &#123;% for message in messages %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-&#123;&#123; message.tags &#125;&#125; alert-dismissible"</span> <span class="attr">role</span>=<span class="string">"alert"</span>&gt;</span></span><br><span class="line">          &#123;&#123; message &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    &#123;% endif %&#125;          <span class="comment">&lt;!-- 추가된 부분 끝 --&gt;</span></span><br><span class="line">    </span><br><span class="line">    &#123;% endblock header %&#125;</span><br><span class="line">    </span><br><span class="line">    &#123;% block content %&#125;</span><br><span class="line">    &#123;% endblock content %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Templates-article-list-html"><a href="#Templates-article-list-html" class="headerlink" title="Templates/article_list.html"></a>Templates/article_list.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;<span class="tag">&lt;<span class="name">title</span>&gt;</span>게시글 목록<span class="tag">&lt;/<span class="name">title</span>&gt;</span>&#123;% endblock title %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">tbody</span> &gt; <span class="selector-tag">tr</span> &#123;<span class="attribute">cursor</span>: pointer;&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">&#123;% endblock css %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover table-responsive"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>번호<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>제목<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>작성자<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        &#123;% for article in articles %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">onclick</span>=<span class="string">"location.href='/article/&#123;&#123; article.pk &#125;&#125;/'"</span>&gt;</span>  <span class="comment">&lt;!-- 테이블 행 click 시 url 이동 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.pk &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.author &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 버튼 click 시 url 이동 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/article/create/"</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>새 게시글 작성<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">&#123;% endblock content %&#125;</span><br></pre></td></tr></table></figure><h2 id="Templates-article-detail-html"><a href="#Templates-article-detail-html" class="headerlink" title="Templates/article_detail.html"></a>Templates/article_detail.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bbs/templates/article_detail.html --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;<span class="tag">&lt;<span class="name">title</span>&gt;</span>게시글 상세 - &#123;&#123; article.pk &#125;&#125;. &#123;&#123; article.title &#125;&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span>&#123;% endblock title %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">&#123;% endblock css %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-striped table-bordered"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>번호<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.pk &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>제목<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>내용<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.content | linebreaksbr &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>작성자<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.author &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>작성일<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.created_at | date:"Y-m-d H:i" &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/article/&#123;&#123; article.pk &#125;&#125;/update/"</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>게시글 수정<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">&#123;% endblock content %&#125;</span><br></pre></td></tr></table></figure><h2 id="Templates-article-update-html"><a href="#Templates-article-update-html" class="headerlink" title="Templates/article_update.html"></a>Templates/article_update.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% extends 'base.html' %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;<span class="tag">&lt;<span class="name">title</span>&gt;</span>게시글 수정 - &#123;&#123; article.pk &#125;&#125;. &#123;&#123; article.title &#125;&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span>&#123;% endblock title %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">&#123;% endblock css %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% if messages %&#125;</span><br><span class="line">&#123;% for message in messages %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-&#123;&#123; message.tags &#125;&#125; alert-dismissible"</span> <span class="attr">role</span>=<span class="string">"alert"</span>&gt;</span></span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"."</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span><br><span class="line">&#123;% csrf_token %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"action"</span> <span class="attr">value</span>=<span class="string">"&#123;% if article %&#125;update&#123;% else %&#125;create&#123;% endif %&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-striped table-bordered"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>번호<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.pk &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>제목<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; article.title &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>내용<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">"10"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"content"</span>&gt;</span>&#123;&#123; article.content &#125;&#125;<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>작성자<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; article.author &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>작성일<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; article.created_at | date:"Y-m-d H:i" &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>게시글 저장<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">&#123;% endblock content %&#125;</span><br></pre></td></tr></table></figure><h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><p><img alt="수정" data-src="/img/Django/updatePost.PNG" class="lozad"><br><img alt="새로운글" data-src="/img/Django/newPost.PNG" class="lozad"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Django-CBV-프로젝트-2-세부-코딩&quot;&gt;&lt;a href=&quot;#Django-CBV-프로젝트-2-세부-코딩&quot; class=&quot;headerlink&quot; title=&quot;Django CBV 프로젝트 2. 세부 코딩&quot;&gt;&lt;/a&gt;Django CBV 프로젝트 
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>(Django CBV) 구성</title>
    <link href="https://khs9628.github.io/2019/09/20/CBV1/"/>
    <id>https://khs9628.github.io/2019/09/20/CBV1/</id>
    <published>2019-09-20T10:11:46.000Z</published>
    <updated>2019-09-21T06:48:53.327Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Django-CBV-프로젝트-1-기본-프로젝트-구조"><a href="#Django-CBV-프로젝트-1-기본-프로젝트-구조" class="headerlink" title="Django CBV 프로젝트 1. 기본 프로젝트 구조"></a>Django CBV 프로젝트 1. 기본 프로젝트 구조</h1><p><a href="https://swarf00.github.io/2018/11/23/get-started.html" rel="external nofollow noopener noreferrer" target="_blank">참고 사이트</a></p><h2 id="프로젝트-구성"><a href="#프로젝트-구성" class="headerlink" title="프로젝트 구성"></a>프로젝트 구성</h2><pre><code># Projectminitutorial/        # 프로젝트의 루트 디렉토리입니다. 디렉토리이름은 변경하셔도 됩니다.├── manage.py       # CLI에서 장고 프로젝트의 다양한 기능들을 사용할 수 있게 해주는 유틸리티입니다.└── minitutorial/   # 실제 프로젝트 디렉토리입니다. 프로젝트의 설정을 할 수 있으며, 파이썬 패키지로 사용됩니다.    ├── __init__.py # 파이썬 패키지에 필수로 들어있는 초기화 파일입니다. 프로젝트를 패키지로 불러올 때 가장 먼저 실행되는 스크립트입니다.    ├── settings.py # 프로젝트 설정파일입니다.    ├── urls.py     # 웹 url들을 view와 매칭시켜주는 파일입니다.    └── wsgi.py     # WSGI 호환 웹 서버로 서비스할 때 실행되는 시작점입니다.-------------------------------------------------# APPbbs/├── __init__.py      # 앱 패키지 초기화 스크립트입니다.├── admin.py         # 장고 어드민 설정파일입니다. 어드민에 등록된 모델은 장고에서 자동 생성하는 어드민 페이지에서 관리할 수 있습니다.├── apps.py          # 앱 설정 파일입니다.└── migrations/      # 데이터베이스 마이그레이션 디렉토리. 장고 ORM은 모델 스키마의 변화가 생길 때마다 migration 파일을 생성하고 이것을 통해 스키마를 업데이트 합니다. migration 파일을 통해 협업자들과 함께 데이터베이스의 스키마를 동기화할 수 있습니다.    ├── __init__.py  # 마이그레이션 패키지 초기화 스크립트입니다.    ├── models.py        # 앱 모델 파일입니다. 게시판의 모든 데이터를 저장할 데이터베이스를 장고 ORM을 통해 모델화합니다.    ├── tests.py         # 앱 내의 기능들을 테스트하는 기능을 구현하는 파일입니다.    ├── views.py         # 앱의 화면(template)과 데이터(model) 사이에서 사용자의 요청을 처리하여 모델에 저장하고, 모델에 저장된 데이터를 화면에 전달하는 역할을 합니다.    └── templates/            ├── base.html                # 기본 틀이 되는 html            ├── article_list.html        # 게시글 목록이 보이는 html                    ├── article_detail.html      # 특정 게시글이 보이는 html            └── article_update.html      # 새로운 게시글이나 특정 글을 update 하는 html</code></pre><h2 id="프로젝트-생성"><a href="#프로젝트-생성" class="headerlink" title="프로젝트 생성"></a>프로젝트 생성</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ django-admin startproject minitutorial</span><br><span class="line">$ python manage.py startapp bbs</span><br></pre></td></tr></table></figure><h2 id="모델-설계-M-Model"><a href="#모델-설계-M-Model" class="headerlink" title="모델 설계 M (Model)"></a>모델 설계 M (Model)</h2><p>게시글(Article) - <code>제목(title)</code>, <code>내용(content)</code>, <code>작성자(author)</code>, <code>작성일(created_at)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bbs.models.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    title      = models.CharField(<span class="string">'제목'</span>, max_length=<span class="number">126</span>, null=<span class="literal">False</span>)</span><br><span class="line">    content    = models.TextField(<span class="string">'내용'</span>, null=<span class="literal">False</span>)</span><br><span class="line">    author     = models.CharField(<span class="string">'작성자'</span>, max_length=<span class="number">16</span>, null=<span class="literal">False</span>)</span><br><span class="line">    created_at = models.DateTimeField(<span class="string">'작성일'</span>, auto_now_add=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># toString()메소드와 비슷</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'[&#123;&#125;] &#123;&#125;'</span>.format(self.id, self.title)</span><br></pre></td></tr></table></figure><h1 id="뷰-설계-V-View"><a href="#뷰-설계-V-View" class="headerlink" title="뷰 설계 V (View)"></a>뷰 설계 V (View)</h1><p>기능 - <code>글목록(list)</code>, <code>글상세보기(detail)</code>, <code>글수정(update)</code>, <code>글추가(new)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bbs/views.py - CBV(Class Based View)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> TemplateView</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleListView</span><span class="params">(TemplateView)</span>:</span>         <span class="comment"># 게시글 목록</span></span><br><span class="line">    template_name = <span class="string">'base.html'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        ctx = &#123;&#125;                             <span class="comment"># 템플릿에 전달할 데이터</span></span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleDetailView</span><span class="params">(TemplateView)</span>:</span>       <span class="comment"># 게시글 상세</span></span><br><span class="line">    template_name = <span class="string">'base.html'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        ctx = &#123;&#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleCreateUpdateView</span><span class="params">(TemplateView)</span>:</span>  <span class="comment"># 게시글 추가, 수정</span></span><br><span class="line">    template_name = <span class="string">'base.html'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span>  <span class="comment"># 화면 요청</span></span><br><span class="line">        ctx = &#123;&#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span> <span class="comment"># 액션</span></span><br><span class="line">        ctx = &#123;&#125;</span><br><span class="line">        <span class="keyword">return</span> self.render_to_response(ctx)</span><br></pre></td></tr></table></figure><h2 id="API-명세"><a href="#API-명세" class="headerlink" title="API 명세"></a>API 명세</h2><table><thead><tr><th align="left">URL</th><th align="center">METHOD</th><th align="center">Description</th><th align="center">Params</th><th align="center">Return</th></tr></thead><tbody><tr><td align="left">/article/</td><td align="center">GET</td><td align="center">글 목록</td><td align="center">X</td><td align="center">[..{ Article }]</td></tr><tr><td align="left">/article/create/</td><td align="center">POST</td><td align="center">새로운 글 작성</td><td align="center">(Title &amp; Content &amp; Author)</td><td align="center"></td></tr><tr><td align="left">article/article_id/</td><td align="center">GET</td><td align="center">글 상세보기</td><td align="center">(Article_id)</td><td align="center">{ Article }</td></tr><tr><td align="left">article/article_id/update/</td><td align="center">POST</td><td align="center">글 수정</td><td align="center">(Article_id)</td><td align="center"></td></tr></tbody></table><blockquote><p>cf) args &amp; kwargs?<br>설명 해보자!</p></blockquote><h2 id="템플릿-설계-T-Templates"><a href="#템플릿-설계-T-Templates" class="headerlink" title="템플릿 설계 T (Templates)"></a>템플릿 설계 T (Templates)</h2><pre><code>├── base.html                # 기본 틀이 되는 html├── article_list.html        # 게시글 목록이 보이는 html        ├── article_detail.html      # 특정 게시글이 보이는 html└── article_update.html      # 새로운 게시글이나 특정 글을 update 하는 html</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Django-CBV-프로젝트-1-기본-프로젝트-구조&quot;&gt;&lt;a href=&quot;#Django-CBV-프로젝트-1-기본-프로젝트-구조&quot; class=&quot;headerlink&quot; title=&quot;Django CBV 프로젝트 1. 기본 프로젝트 구조&quot;&gt;&lt;/a&gt;D
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>React &amp; Django 꾸미기</title>
    <link href="https://khs9628.github.io/2019/09/20/React6/"/>
    <id>https://khs9628.github.io/2019/09/20/React6/</id>
    <published>2019-09-19T15:44:51.000Z</published>
    <updated>2019-09-19T17:27:20.970Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Material-UI"><a href="#Material-UI" class="headerlink" title="Material UI"></a>Material UI</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// with npm</span><br><span class="line">npm install @material-ui/core</span><br><span class="line"></span><br><span class="line">// with npm</span><br><span class="line">npm install @material-ui/icons</span><br></pre></td></tr></table></figure><h1 id="robo-font-import-public-index-html"><a href="#robo-font-import-public-index-html" class="headerlink" title="robo font import public/index.html"></a>robo font import public/index.html</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* robo font */</span></span><br><span class="line">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap" /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* font-icon */</span></span><br><span class="line">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" /&gt;</span><br></pre></td></tr></table></figure><blockquote><p>Uncaught (in promise) Error: Request failed with status code 404<br>Button Component를 사용해서 컴포넌트 정보가 다 넘어옴..</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;Button color=<span class="string">"secondary"</span> size=<span class="string">"small"</span>  value = &#123;post.id&#125; onClick= &#123;<span class="keyword">this</span>.handlingDelete&#125;&gt;삭제하기&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ------------------------------------------------</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 직접 데이터를 넘겨준다</span></span><br><span class="line"><span class="regexp">&lt;Button color="secondary" size="small" onClick=&#123;(event)=&gt;this.handlingDelete(post.id)&#125;&gt;삭제하기&lt;/</span>Button&gt;</span><br></pre></td></tr></table></figure><h2 id="App-css"><a href="#App-css" class="headerlink" title="App.css"></a>App.css</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.PostingPaper</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.PostingForm</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;</span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'./api'</span>;</span><br><span class="line"><span class="keyword">import</span> PostView <span class="keyword">from</span> <span class="string">'./Components/PostView'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Container <span class="keyword">from</span> <span class="string">'@material-ui/core/Container'</span>;</span><br><span class="line"><span class="keyword">import</span> Paper <span class="keyword">from</span> <span class="string">'@material-ui/core/Paper'</span>;</span><br><span class="line"><span class="keyword">import</span> TextField <span class="keyword">from</span> <span class="string">'@material-ui/core/TextField'</span>;</span><br><span class="line"><span class="keyword">import</span> Button <span class="keyword">from</span> <span class="string">'@material-ui/core/Button'</span>;</span><br><span class="line"><span class="comment">//card</span></span><br><span class="line"><span class="keyword">import</span> Card <span class="keyword">from</span> <span class="string">'@material-ui/core/Card'</span>;</span><br><span class="line"><span class="keyword">import</span> CardActions <span class="keyword">from</span> <span class="string">'@material-ui/core/CardActions'</span>;</span><br><span class="line"><span class="keyword">import</span> CardContent <span class="keyword">from</span> <span class="string">'@material-ui/core/CardContent'</span>;</span><br><span class="line"><span class="keyword">import</span> Typography <span class="keyword">from</span> <span class="string">'@material-ui/core/Typography'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      title: <span class="string">''</span>,</span><br><span class="line">      content: <span class="string">''</span>,</span><br><span class="line">      results: [],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="keyword">this</span>.getPosts()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> getPosts()&#123;</span><br><span class="line">    <span class="keyword">const</span> _results = <span class="keyword">await</span> api.getAllPosts()</span><br><span class="line">    <span class="comment">//_results.data에는 아무 데이터가 없다. -&gt; 비동기</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">results</span>: _results.data&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(_results)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handlingChange = <span class="function">(<span class="params">event</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;[event.target.name]: event.target.value&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handlingSubmit = <span class="keyword">async</span> (event) =&gt; &#123;</span><br><span class="line">    event.preventDefault() <span class="comment">//event의 기능 -&gt; 막는다</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> api.createPost(&#123;<span class="attr">title</span>: <span class="keyword">this</span>.state.title, <span class="attr">content</span>: <span class="keyword">this</span>.state.content&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"완료! "</span>+ result)</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">title</span>: <span class="string">''</span>, <span class="attr">content</span>: <span class="string">''</span>&#125;)</span><br><span class="line">    <span class="keyword">this</span>.getPosts()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handlingDelete = <span class="keyword">async</span> (id) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> api.deletePost(id)</span><br><span class="line">    <span class="keyword">this</span>.getPosts()</span><br><span class="line">  &#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">      &lt;Container maxWidth=<span class="string">"lg"</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">"PostingSection"</span>&gt;</span><br><span class="line">        &lt;Paper className=<span class="string">"PostingPaper"</span>&gt;</span><br><span class="line">          &lt;h2&gt;대나무 숲 작성하기&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">          &lt;form className="PostingForm" onSubmit=&#123;this.handlingSubmit&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;TextField</span></span><br><span class="line"><span class="regexp">            id="outlined-name"</span></span><br><span class="line"><span class="regexp">            label="title"</span></span><br><span class="line"><span class="regexp">            name="title"</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/ className=&#123;classes.textField&#125;</span></span><br><span class="line"><span class="regexp">            value=&#123;this.state.title&#125;</span></span><br><span class="line"><span class="regexp">            onChange=&#123;this.handlingChange&#125;</span></span><br><span class="line"><span class="regexp">            margin="normal"</span></span><br><span class="line"><span class="regexp">            variant="outlined"</span></span><br><span class="line"><span class="regexp">          /</span>&gt;</span><br><span class="line"></span><br><span class="line">          &lt;TextField</span><br><span class="line">            id=<span class="string">"outlined-name"</span></span><br><span class="line">            label=<span class="string">"content"</span></span><br><span class="line">            name=<span class="string">"content"</span></span><br><span class="line">            multiline</span><br><span class="line">            rows=<span class="string">"4"</span></span><br><span class="line">            <span class="comment">// className=&#123;classes.textField&#125;</span></span><br><span class="line">            value=&#123;<span class="keyword">this</span>.state.content&#125;</span><br><span class="line">            onChange=&#123;<span class="keyword">this</span>.handlingChange&#125;</span><br><span class="line">            margin=<span class="string">"normal"</span></span><br><span class="line">            variant=<span class="string">"outlined"</span></span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;Button variant=<span class="string">"contained"</span> color=<span class="string">"primary"</span> type =<span class="string">"submit"</span>&gt;제출하기&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>form&gt;</span><br><span class="line">        &lt;<span class="regexp">/Paper&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;div className=<span class="string">"ViewSection"</span>&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">this</span>.state.results.map(<span class="function">(<span class="params">post</span>) =&gt;</span></span><br><span class="line">            &lt;Card className=&#123;<span class="string">'card'</span>&#125;&gt;</span><br><span class="line">              &lt;CardContent&gt;</span><br><span class="line">                &lt;Typography&gt;</span><br><span class="line">                  &lt;PostView key = &#123;post.id&#125; id = &#123;post.id&#125; title = &#123;post.title&#125; content = &#123;post.content&#125;/&gt;</span><br><span class="line">                &lt;<span class="regexp">/Typography&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>CardContent&gt;</span><br><span class="line">              &lt;CardActions&gt;</span><br><span class="line">                &lt;Button color=<span class="string">"secondary"</span> size=<span class="string">"small"</span> onClick=&#123;(event)=&gt;<span class="keyword">this</span>.handlingDelete(post.id)&#125;&gt;삭제하기&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>CardActions&gt;</span><br><span class="line">            &lt;<span class="regexp">/Card&gt;</span></span><br><span class="line"><span class="regexp">          )</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;<span class="regexp">/Container&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><img alt="결과" data-src="/img/React/project2.PNG" class="lozad">)</p><h1 id="Material-UI-1"><a href="#Material-UI-1" class="headerlink" title="Material-UI"></a><a href="https://material-ui.com/" rel="external nofollow noopener noreferrer" target="_blank">Material-UI</a></h1><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Material-UI&quot;&gt;&lt;a href=&quot;#Material-UI&quot; class=&quot;headerlink&quot; title=&quot;Material UI&quot;&gt;&lt;/a&gt;Material UI&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table
      
    
    </summary>
    
    
      <category term="React" scheme="https://khs9628.github.io/categories/React/"/>
    
    
      <category term="React6" scheme="https://khs9628.github.io/tags/React6/"/>
    
  </entry>
  
  <entry>
    <title>React &amp; Django 기능</title>
    <link href="https://khs9628.github.io/2019/09/19/React5/"/>
    <id>https://khs9628.github.io/2019/09/19/React5/</id>
    <published>2019-09-19T04:11:40.000Z</published>
    <updated>2019-09-19T17:30:57.520Z</updated>
    
    <content type="html"><![CDATA[<h2 id="프로젝트-설명-대나무숲"><a href="#프로젝트-설명-대나무숲" class="headerlink" title="프로젝트 설명 : 대나무숲"></a>프로젝트 설명 : 대나무숲</h2><ol><li>Django-backend : API 호출 ( 글 저장 / 글 가져오기 / 글 삭제)</li><li>React-Frontend : 간단한 글 쓰기 및 보여주기 , 삭제</li><li>Axios : http 통신 (비동기 통신) </li></ol><h2 id="Install-필요한-패키지-설치"><a href="#Install-필요한-패키지-설치" class="headerlink" title="Install 필요한 패키지 설치"></a>Install 필요한 패키지 설치</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install django-restframework</span><br><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure><h2 id="Run-DB-마이그래이션"><a href="#Run-DB-마이그래이션" class="headerlink" title="Run DB 마이그래이션"></a>Run DB 마이그래이션</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure><h2 id="BACKEND-API명세"><a href="#BACKEND-API명세" class="headerlink" title="BACKEND API명세"></a>BACKEND API명세</h2><table><thead><tr><th align="center">URL</th><th align="center">METHOD</th><th align="center">Description</th><th align="center">Params</th><th align="center">Return</th></tr></thead><tbody><tr><td align="center">/api/posts</td><td align="center">GET</td><td align="center">전체 글을 조회합니다.</td><td align="center"></td><td align="center">[…{Post}]</td></tr><tr><td align="center">/api/posts</td><td align="center">POST</td><td align="center">새로운 글을 작성합니다.</td><td align="center"></td><td align="center">{Post}</td></tr><tr><td align="center">/api/posts/[id]</td><td align="center">GET</td><td align="center">특정 ID의 글을 조회합니다.</td><td align="center"></td><td align="center">{Post}</td></tr><tr><td align="center">/api/posts/[id]</td><td align="center">DELETE</td><td align="center">특정 ID의 글을 삭제합니다.</td><td align="center"></td><td align="center"></td></tr></tbody></table><h2 id="React-app-생성"><a href="#React-app-생성" class="headerlink" title="React app 생성"></a>React app 생성</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app reactfrontend</span><br><span class="line"><span class="comment"># 시작</span></span><br><span class="line">npm start</span><br><span class="line"><span class="comment"># promise 기반의 http 통신 (비동기 통신)</span></span><br><span class="line">npm install axios</span><br></pre></td></tr></table></figure><h3 id="React-App에-src-api-js-생성"><a href="#React-App에-src-api-js-생성" class="headerlink" title="React App에 src/api.js 생성"></a>React App에 src/api.js 생성</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axios 를 사용하는 js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span></span><br><span class="line"></span><br><span class="line">axios.defaults.baseURL = <span class="string">"http://127.0.0.1:8000/api"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 모든 글 불러오기</span></span><br><span class="line">    getAllPosts()&#123;</span><br><span class="line">        <span class="keyword">return</span> axios.get(<span class="string">'/posts/'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="comment">// 글 작성하기</span></span><br><span class="line">    createPost(data)&#123;</span><br><span class="line">        <span class="keyword">return</span> axios.post(<span class="string">'/posts/'</span>, data)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 글 삭제하기</span></span><br><span class="line">    deletePost(id)&#123;</span><br><span class="line">        <span class="keyword">return</span> axios.delete(<span class="string">'/posts/'</span>+<span class="built_in">String</span>(id))</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="글을-써주고-삭제할수-있게-해주는-PostView-js-컴포넌트-작성"><a href="#글을-써주고-삭제할수-있게-해주는-PostView-js-컴포넌트-작성" class="headerlink" title="글을 써주고 삭제할수 있게 해주는 PostView.js 컴포넌트 작성"></a>글을 써주고 삭제할수 있게 해주는 PostView.js 컴포넌트 작성</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const dumy_prop = &#123;</span></span><br><span class="line"><span class="comment">//     title: '테스트용 타이틀',</span></span><br><span class="line"><span class="comment">//     content: '테스트용 글 입니다',</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">PostView</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;id, title, content&#125; = <span class="keyword">this</span>.props</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;id&#125;</span><br><span class="line">                &lt;h3&gt;&#123;title&#125;&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">                &lt;p&gt;&#123;content&#125;&lt;/</span>p&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="app-js-gt-index-js-main-컴포넌트인-App-js-작성"><a href="#app-js-gt-index-js-main-컴포넌트인-App-js-작성" class="headerlink" title="app.js -&gt; index.js main 컴포넌트인 App.js 작성"></a>app.js -&gt; index.js main 컴포넌트인 App.js 작성</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;</span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'./api'</span>;</span><br><span class="line"><span class="keyword">import</span> PostView <span class="keyword">from</span> <span class="string">'./Components/PostView'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      title: <span class="string">''</span>,</span><br><span class="line">      content: <span class="string">''</span>,</span><br><span class="line">      results: [],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="keyword">this</span>.getPosts()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> getPosts()&#123;</span><br><span class="line">    <span class="keyword">const</span> _results = <span class="keyword">await</span> api.getAllPosts()</span><br><span class="line">    <span class="comment">//_results.data에는 아무 데이터가 없다. -&gt; 비동기</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">results</span>: _results.data&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(_results)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handlingChange = <span class="function">(<span class="params">event</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;[event.target.name]: event.target.value&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handlingSubmit = <span class="keyword">async</span> (event) =&gt; &#123;</span><br><span class="line">    event.preventDefault() <span class="comment">//event의 기능 -&gt; 막는다</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> api.createPost(&#123;<span class="attr">title</span>: <span class="keyword">this</span>.state.title, <span class="attr">content</span>: <span class="keyword">this</span>.state.content&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"완료! "</span>+ result)</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">title</span>: <span class="string">''</span>, <span class="attr">content</span>: <span class="string">''</span>&#125;)</span><br><span class="line">    <span class="keyword">this</span>.getPosts()</span><br><span class="line">  &#125;</span><br><span class="line">  handlingDelete = <span class="keyword">async</span> (event) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> api.deletePost(event.target.value)</span><br><span class="line">    <span class="keyword">this</span>.getPosts()</span><br><span class="line">  &#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">"PostingSection"</span>&gt;</span><br><span class="line">        &lt;h2&gt;대나무 숲 작성하기&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">        &lt;form onSubmit=&#123;this.handlingSubmit&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input</span></span><br><span class="line"><span class="regexp">          name="title"</span></span><br><span class="line"><span class="regexp">          value=&#123;this.state.title&#125;</span></span><br><span class="line"><span class="regexp">          onChange=&#123;this.handlingChange&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">        &lt;textarea</span><br><span class="line">          name=<span class="string">"content"</span></span><br><span class="line">          value=&#123;<span class="keyword">this</span>.state.content&#125;</span><br><span class="line">          onChange=&#123;<span class="keyword">this</span>.handlingChange&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;button type =<span class="string">"submit"</span>&gt;제출하기&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>form&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      </span></span><br><span class="line"><span class="regexp">      &lt;div className="ViewSection"&gt;</span></span><br><span class="line"><span class="regexp">        &#123;</span></span><br><span class="line"><span class="regexp">          this.state.results.map((post) =&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;PostView key = &#123;post.id&#125; id = &#123;post.id&#125; title = &#123;post.title&#125; content = &#123;post.content&#125;/</span>&gt;</span><br><span class="line">            &lt;button value = &#123;post.id&#125; onClick=&#123;<span class="keyword">this</span>.handlingDelete&#125;&gt;삭제하기&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><blockquote><p>Uncaught TypeError: Cannot read property ‘map’ of undefined</p></blockquote><p><code>비동기</code>이기 때문에 결과값을 가져오기전에 넘어가버린다</p><p>-&gt; <strong>async / await</strong> 써줘야함 </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">getPosts()&#123;</span><br><span class="line">    <span class="keyword">const</span> _results = api.getAllPosts()</span><br><span class="line">    <span class="comment">//_results.data에는 아무 데이터가 없다. -&gt; 비동기</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">results</span>: _results.data&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(_results)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> getPosts()&#123;</span><br><span class="line">    <span class="keyword">const</span> _results = <span class="keyword">await</span> api.getAllPosts()</span><br><span class="line">    <span class="comment">//_results.data에는 아무 데이터가 없다. -&gt; 비동기</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">results</span>: _results.data&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(_results)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="실행결과"><a href="#실행결과" class="headerlink" title="실행결과"></a>실행결과</h2><p><img alt="project" data-src="/img/React/project1.PNG" class="lozad"></p><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;프로젝트-설명-대나무숲&quot;&gt;&lt;a href=&quot;#프로젝트-설명-대나무숲&quot; class=&quot;headerlink&quot; title=&quot;프로젝트 설명 : 대나무숲&quot;&gt;&lt;/a&gt;프로젝트 설명 : 대나무숲&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Django-backend : API
      
    
    </summary>
    
    
      <category term="React" scheme="https://khs9628.github.io/categories/React/"/>
    
    
      <category term="React" scheme="https://khs9628.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>Event &amp; Lifecycle</title>
    <link href="https://khs9628.github.io/2019/09/17/React4/"/>
    <id>https://khs9628.github.io/2019/09/17/React4/</id>
    <published>2019-09-17T09:34:21.000Z</published>
    <updated>2019-09-19T16:18:58.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Event"><a href="#Event" class="headerlink" title="Event"></a>Event</h2><p>== 웹상에서의 모든 행위</p><h3 id="Event-Handling"><a href="#Event-Handling" class="headerlink" title="Event Handling?"></a>Event Handling?</h3><p>Web에서 인터렉션 ? - EVENT의 핵심</p><ul><li>State를 만든다</li><li>Handling 함수를 만든다.</li><li>이벤트가 발생하는 HTML 태그에서 onEvent명을 통해 handling 함수를 부른다.</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 요구사항 1. 시간과 분이 변화하는 것을 보고 싶다.</span></span><br><span class="line"><span class="comment">// 요구사항 2. 동적으로 보고싶다.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorldClock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      hour: <span class="keyword">this</span>.props.time,</span><br><span class="line">      minute : <span class="number">0</span>,</span><br><span class="line">      stop : <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// this.setState</span></span><br><span class="line">    <span class="comment">// this.state.minute += 1; -&gt; 절대 불가</span></span><br><span class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state</span>)=&gt;</span>(</span><br><span class="line">        state.minute === <span class="number">59</span></span><br><span class="line">        ?&#123;<span class="attr">hour</span>: state.hour + <span class="number">1</span>, <span class="attr">minute</span> :<span class="number">0</span>&#125;</span><br><span class="line">        : &#123;<span class="attr">minute</span>: state.minute + <span class="number">1</span>&#125;</span><br><span class="line">        ))</span><br><span class="line">    &#125;, <span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//1-2.handling 함수를 만든다</span></span><br><span class="line">  handlingClick = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.target)</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">stop</span>: event.target.value&#125;)</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.timer);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// render 미리 약속되있는 함수</span></span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">      &lt;div className=&#123;<span class="string">"WorldClock"</span>&#125;&gt;</span><br><span class="line">        &lt;h2&gt; 도시 : &#123;<span class="keyword">this</span>.props.city&#125; &lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">        &lt;p&gt; 시간 : &#123;this.state.hour&#125;시 &#123;this.state.minute&#125;분&lt;/</span>p&gt;</span><br><span class="line">        &#123;<span class="comment">/* 1-3. onEvent명을 통해 handling 함수를 부른다. */</span>&#125;</span><br><span class="line">        &lt;button value=&#123;<span class="literal">true</span>&#125; onClick=&#123;<span class="keyword">this</span>.handlingClick&#125;&gt;멈춰!<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class App extends React.Component  &#123;</span></span><br><span class="line"><span class="regexp">  constructor(props)&#123;</span></span><br><span class="line"><span class="regexp">    super(props)</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/1-1. state를 만든다</span></span><br><span class="line"><span class="regexp">    this.cityTimeData= [</span></span><br><span class="line"><span class="regexp">      ['서울', 10],</span></span><br><span class="line"><span class="regexp">      ['북한', 11],</span></span><br><span class="line"><span class="regexp">      ['도쿄', 12],</span></span><br><span class="line"><span class="regexp">      ['베이징', 1],</span></span><br><span class="line"><span class="regexp">    ]</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/2-1. state를 만든다</span></span><br><span class="line"><span class="regexp">    this.state =&#123;</span></span><br><span class="line"><span class="regexp">      content: ''</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/2-2. handling 함수를 만든다</span></span><br><span class="line"><span class="regexp">  handlingChange = (event) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;content: event.target.value&#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;div className="App"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;h1 className = &#123;'myStyle'&#125;&gt;안녕하세요&lt;/</span>h1&gt;</span><br><span class="line">      &lt;div className= &#123;<span class="string">'post'</span>&#125;&gt;</span><br><span class="line">        첫 게시글입니다.</span><br><span class="line">        &#123;<span class="comment">/* 2-3.onEvent명을 통해 handling 함수를 부른다. */</span>&#125;</span><br><span class="line">        &lt;textarea value=&#123;<span class="keyword">this</span>.state.content&#125; onChange=&#123;<span class="keyword">this</span>.handlingChange&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &#123;this.cityTimeData.map((citytime,index)=&gt;</span></span><br><span class="line"><span class="regexp">      &lt;WorldClock city=&#123;citytime[0]&#125; time =&#123;citytime[1]&#125; key =&#123;index&#125; /</span>&gt;</span><br><span class="line">      )</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/컴포넌트 수출</span></span><br><span class="line"><span class="regexp">export default App; /</span><span class="regexp">/ -&gt; index.js</span></span><br></pre></td></tr></table></figure><h2 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h2><p>컴포넌트가 계속 변화하기 때문에 중요</p><p><img alt="State" data-src="/assets/img/React/Lifecycle.PNG" class="lozad"></p><ol><li><p>Constructor<br>State 구조 설정<br>컴포넌트가 Mount 하기전에 할 설정<br>setState X</p></li><li><p>ComponentDidMount<br>필요한 데이터 요청<br>각종 비동기 요청(Subscription)</p></li><li><p>ComponentDidUpdate<br>업데이트 이후 수정할 때<br>If() { setState() }</p></li><li><p>ComponentWillUnmount<br>데이터 요청 / 비동기 함수 / 타이머 종료<br>setState X</p></li><li><p>자식 컴포넌트 + 부모의 Update + 최적화<br>ShouldComponetUpdate<br>PureComponent</p></li></ol><h2 id="HOOK-참고사이트"><a href="#HOOK-참고사이트" class="headerlink" title="HOOK?참고사이트"></a><a href="https://ko.reactjs.org/docs/hooks-intro.html" rel="external nofollow noopener noreferrer" target="_blank">HOOK?참고사이트</a></h2><p><a href="https://divjoy.com/?ref=stackshare" rel="external nofollow noopener noreferrer" target="_blank">React컴포넌트참고사이트</a></p><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Event&quot;&gt;&lt;a href=&quot;#Event&quot; class=&quot;headerlink&quot; title=&quot;Event&quot;&gt;&lt;/a&gt;Event&lt;/h2&gt;&lt;p&gt;== 웹상에서의 모든 행위&lt;/p&gt;
&lt;h3 id=&quot;Event-Handling&quot;&gt;&lt;a href=&quot;#Event
      
    
    </summary>
    
    
      <category term="React" scheme="https://khs9628.github.io/categories/React/"/>
    
    
      <category term="React" scheme="https://khs9628.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>Props &amp; State</title>
    <link href="https://khs9628.github.io/2019/09/17/React3/"/>
    <id>https://khs9628.github.io/2019/09/17/React3/</id>
    <published>2019-09-17T08:49:49.000Z</published>
    <updated>2019-09-20T16:17:52.879Z</updated>
    
    <content type="html"><![CDATA[<h2 id="컴포넌트-실습-Feat-map"><a href="#컴포넌트-실습-Feat-map" class="headerlink" title="컴포넌트 실습 (Feat.map)"></a>컴포넌트 실습 (Feat.map)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSX -&gt; HTML 태그</span></span><br><span class="line"><span class="comment">// JSX -&gt; style을 통해 css (JSX)</span></span><br><span class="line"><span class="comment">// JSX -&gt; className을 통해 css (css -&gt; App.css)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">WorldClock</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">  &lt;div className=&#123;<span class="string">"WorldClock"</span>&#125;&gt;</span><br><span class="line">    &lt;h2&gt; 도시 : &#123;props.city&#125; &lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt; 시간 : &#123;props.time&#125; 시&lt;/</span>p&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function App() &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/list 타입의 Data</span></span><br><span class="line"><span class="regexp">  const cityTimeData= [</span></span><br><span class="line"><span class="regexp">    ['서울', 10],</span></span><br><span class="line"><span class="regexp">    ['북한', 11],</span></span><br><span class="line"><span class="regexp">    ['도쿄', 12],</span></span><br><span class="line"><span class="regexp">    ['베이징', 1],</span></span><br><span class="line"><span class="regexp">  ]</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  const WorldClockList = cityTimeData.map((citytime, index)=&gt;</span></span><br><span class="line"><span class="regexp">    &lt;WorldClock city=&#123;citytime[0]&#125; time =&#123;citytime[1]&#125; key =&#123;index&#125; /</span>&gt;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">      &lt;h1 className = &#123;<span class="string">'myStyle'</span>&#125;&gt;안녕하세요&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div className= &#123;'post'&#125;&gt;첫 게시글입니다.&lt;/</span>div&gt;</span><br><span class="line">    &#123;WorldClockList&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/컴포넌트 수출</span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure><h1 id="오류"><a href="#오류" class="headerlink" title="오류"></a>오류</h1><blockquote><p>index.js:1375 Warning: Each child in a list should have a unique “key” prop.</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-&gt; <span class="keyword">const</span> WorldClockList = cityTimeData.map(<span class="function">(<span class="params">citytime, index</span>)=&gt;</span></span><br><span class="line">    &lt;WorldClock city=&#123;citytime[<span class="number">0</span>]&#125; time =&#123;citytime[<span class="number">1</span>]&#125; key =&#123;index&#125; /&gt;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>Props만으로도 표현 불가능 / Render로 표시 불가능  -&gt; State 사용</p><table><thead><tr><th align="center">–</th><th align="center">state</th><th align="center">stateless</th></tr></thead><tbody><tr><td align="center">function</td><td align="center">O(hook기술)</td><td align="center">O</td></tr><tr><td align="center">Class</td><td align="center">O</td><td align="center">O</td></tr></tbody></table><p>State는 좋지만 무겁고 어렵기 때문에 되도록 사용안함</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 요구사항 1. 시간과 분이 변화하는 것을 보고 싶다.</span></span><br><span class="line"><span class="comment">// 요구사항 2. 동적으로 보고싶다.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorldClock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      hour: <span class="keyword">this</span>.props.time,</span><br><span class="line">      minute : <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// this.setState</span></span><br><span class="line">    <span class="comment">// this.state.minute += 1; -&gt; 절대 불가</span></span><br><span class="line">    setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state</span>)=&gt;</span>(</span><br><span class="line">        state.minute === <span class="number">59</span></span><br><span class="line">        ?&#123;<span class="attr">hour</span>: state.hour + <span class="number">1</span>, <span class="attr">minute</span> :<span class="number">0</span>&#125;</span><br><span class="line">        : &#123;<span class="attr">minute</span>: state.minute + <span class="number">1</span>&#125;</span><br><span class="line">        ))</span><br><span class="line">    &#125;, <span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// render 미리 약속되있는 함수</span></span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">      &lt;div className=&#123;<span class="string">"WorldClock"</span>&#125;&gt;</span><br><span class="line">        &lt;h2&gt; 도시 : &#123;<span class="keyword">this</span>.props.city&#125; &lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">        &lt;p&gt; 시간 : &#123;this.state.hour&#125;시 &#123;this.state.minute&#125;분&lt;/</span>p&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="실행-결과"><a href="#실행-결과" class="headerlink" title="실행 결과"></a>실행 결과</h2><p><img alt="State" data-src="/assets/img/React/state.PNG" class="lozad"></p><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;컴포넌트-실습-Feat-map&quot;&gt;&lt;a href=&quot;#컴포넌트-실습-Feat-map&quot; class=&quot;headerlink&quot; title=&quot;컴포넌트 실습 (Feat.map)&quot;&gt;&lt;/a&gt;컴포넌트 실습 (Feat.map)&lt;/h2&gt;&lt;figure class
      
    
    </summary>
    
    
      <category term="React" scheme="https://khs9628.github.io/categories/React/"/>
    
    
      <category term="React" scheme="https://khs9628.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>React와 Django 프로젝트</title>
    <link href="https://khs9628.github.io/2019/09/17/Django5/"/>
    <id>https://khs9628.github.io/2019/09/17/Django5/</id>
    <published>2019-09-17T05:45:17.000Z</published>
    <updated>2019-09-24T07:39:57.812Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://velog.io/@killi8n/Django%EC%99%80-React%EB%A1%9C-%ED%95%9C%EC%A4%84-%EB%85%B8%ED%8A%B8-%EC%95%B1-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EA%B8%B0-2.-React-Django-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1.-najmam6ds2" rel="external nofollow noopener noreferrer" target="_blank">참고 블로그</a></p><h1 id="React-amp-Django-프로젝트"><a href="#React-amp-Django-프로젝트" class="headerlink" title="React &amp; Django 프로젝트"></a>React &amp; Django 프로젝트</h1><p><strong>input태그를 이용하여 직관적으로 한줄 노트를 작성할수 있는 앱</strong></p><h2 id="초기-설정"><a href="#초기-설정" class="headerlink" title="초기 설정"></a>초기 설정</h2><h3 id="Django-앱생성"><a href="#Django-앱생성" class="headerlink" title="Django 앱생성"></a>Django 앱생성</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 가상환경 생성</span></span><br><span class="line">python –m venv venv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 가상환경 접속</span></span><br><span class="line"><span class="built_in">source</span> venv/Scripts/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># django 프로젝트 생성</span></span><br><span class="line">(venv) pip install django</span><br><span class="line">(venv) django-admin startproject dnote</span><br><span class="line">(venv) <span class="built_in">cd</span> dnote</span><br><span class="line">(venv) python manage.py migrate</span><br><span class="line">(venv) python manage.py runserver <span class="comment"># 실행확인</span></span><br></pre></td></tr></table></figure><h3 id="react-앱생성"><a href="#react-앱생성" class="headerlink" title="react 앱생성"></a>react 앱생성</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-react-app</span><br><span class="line">create-react-app frontend</span><br><span class="line"><span class="built_in">cd</span> frontend</span><br><span class="line">npm start <span class="comment"># 실행확인</span></span><br></pre></td></tr></table></figure><h3 id="React-개발-환경-설정-및-구조-잡기-sass-설정"><a href="#React-개발-환경-설정-및-구조-잡기-sass-설정" class="headerlink" title="React - 개발 환경 설정 및 구조 잡기.(sass 설정)"></a>React - 개발 환경 설정 및 구조 잡기.(sass 설정)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> frontend</span><br><span class="line"><span class="comment"># 관련 패키지 다운</span></span><br><span class="line">npm install</span><br><span class="line">npm run eject</span><br><span class="line"><span class="comment"># 오류시 git add. / git commit -m "" 해줘야함 </span></span><br><span class="line"><span class="comment"># -&gt; 최상 디렉터리에(해당 폴더 git이 있어서 충돌)</span></span><br><span class="line">npm start <span class="comment"># react 시작하기</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sass 설정</span></span><br><span class="line">npm install --save-dev node-sass</span><br><span class="line">npm install --save-dev sass-loader</span><br></pre></td></tr></table></figure><p><img alt="eject실행" data-src="/img/React/eject.PNG" class="lozad"></p><h3 id="config-paths-js"><a href="#config-paths-js" class="headerlink" title="config/paths.js"></a>config/paths.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config after eject: we're in ./config/</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// 추가해줍니다.</span></span><br><span class="line">  styles: resolveApp(<span class="string">"src/styles"</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="React-개발-환경-설정-및-구조-잡기-프로젝트-구조잡기"><a href="#React-개발-환경-설정-및-구조-잡기-프로젝트-구조잡기" class="headerlink" title="React - 개발 환경 설정 및 구조 잡기.(프로젝트 구조잡기)"></a>React - 개발 환경 설정 및 구조 잡기.(프로젝트 구조잡기)</h2><p><strong>Project : frontend</strong><br>    frontend/        # 프로젝트의 루트 디렉토리입니다.<br>    ├── config/       # react-app 의 설정파일이 모여있는 폴더입니다.<br>    ├── public/       #<br>    ├── scripts/      #<br>    ├── node_modules/   #<br>    └── src/<br>        ├── styles/     # scss/img 등 디자인 파일들 집합<br>        ├── containers/ # 리액트 컨테이너 파일들 집합<br>        ├── components/ # 리액트 컴포넌트 파일들 집합<br>        ├── pages/    # Routing에서 사용될 page 파일들 집합<br>        └── store/     # redux모듈들과 configure파일들 집합</p><h2 id="NODE-PATH-지정"><a href="#NODE-PATH-지정" class="headerlink" title="NODE_PATH 지정"></a>NODE_PATH 지정</h2><p><code>src/.env</code><br>  NODE_PATH=src</p><h2 id="기본-구조-세팅-app-js-gt-root-js-gt-index-js"><a href="#기본-구조-세팅-app-js-gt-root-js-gt-index-js" class="headerlink" title="기본 구조 세팅 app.js -&gt; root.js -&gt; index.js"></a>기본 구조 세팅 app.js -&gt; root.js -&gt; index.js</h2><p><code>src/components/App.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>App.js<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p><code>src/Root.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./components/App"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Root = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default Root;</span></span><br></pre></td></tr></table></figure><p><code>src/index.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> Root <span class="keyword">from</span> <span class="string">"./Root"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.scss'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> serviceWorker <span class="keyword">from</span> <span class="string">'./serviceWorker'</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Root</span> /&gt;</span>, document.getElementById("root"));</span></span><br><span class="line"><span class="xml">serviceWorker.unregister();</span></span><br></pre></td></tr></table></figure><p><img alt="결과" data-src="/img/React/result1.PNG" class="lozad"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://velog.io/@killi8n/Django%EC%99%80-React%EB%A1%9C-%ED%95%9C%EC%A4%84-%EB%85%B8%ED%8A%B8-%EC%95%B1-%EB%A7%8C%EB%93%A4%EC%9
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>RESTful API 프로젝트</title>
    <link href="https://khs9628.github.io/2019/09/17/Django4/"/>
    <id>https://khs9628.github.io/2019/09/17/Django4/</id>
    <published>2019-09-16T15:49:13.000Z</published>
    <updated>2019-09-19T16:09:48.325Z</updated>
    
    <content type="html"><![CDATA[<h2 id="프로젝트-소개"><a href="#프로젝트-소개" class="headerlink" title="프로젝트 소개"></a>프로젝트 소개</h2><p>RESTful API를 가지고 3개의 게시판을 만들어보자</p><ul><li>글을 쓸 수 있는 Essay</li><li>이미지를 올릴 수 있는 Album</li><li>파일을 올릴 수 있는 Files</li></ul><h1 id="코드"><a href="#코드" class="headerlink" title="코드"></a>코드</h1><h2 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a>settings.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="comment">#rest_framework 등록</span></span><br><span class="line">    <span class="string">'rest_framework'</span>,</span><br><span class="line">    <span class="comment"># app 등록</span></span><br><span class="line">    <span class="string">'mystorage'</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 이미지를 등록하기위해 Media 경로지정</span></span><br><span class="line">MEDIA_URL = <span class="string">'/media/'</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR,<span class="string">'media'</span>)</span><br></pre></td></tr></table></figure><h2 id="models-py"><a href="#models-py" class="headerlink" title="models.py"></a>models.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Essay</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    author = models.ForeignKey(settings.AUTH_USER_MODEL, default =<span class="number">1</span>, on_delete = models.CASCADE)</span><br><span class="line">    title = models.CharField(max_length=<span class="number">100</span>)</span><br><span class="line">    body = models.TextField()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Album</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    author = models.ForeignKey(settings.AUTH_USER_MODEL, default =<span class="number">1</span>, on_delete = models.CASCADE)</span><br><span class="line">    image = models.ImageField(upload_to=<span class="string">"images"</span>)</span><br><span class="line">    desc = models.CharField(max_length=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Files</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    author = models.ForeignKey(settings.AUTH_USER_MODEL, default =<span class="number">1</span>, on_delete = models.CASCADE)</span><br><span class="line">    myfile = models.FileField(upload_to=<span class="string">"files"</span>, blank=<span class="literal">False</span>, null= <span class="literal">False</span>)</span><br><span class="line">    desc = models.CharField(max_length=<span class="number">100</span>)</span><br></pre></td></tr></table></figure><h2 id="DB-적용"><a href="#DB-적용" class="headerlink" title="DB 적용"></a>DB 적용</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure><h2 id="serializers-py"><a href="#serializers-py" class="headerlink" title="serializers.py"></a>serializers.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Essay, Album, Files</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EssaySerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 글쓴이를 자동적으로 등록함</span></span><br><span class="line">    author_name = serializers.ReadOnlyField(source=<span class="string">'author.username'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Essay</span><br><span class="line">        <span class="comment"># fields = '__all__'</span></span><br><span class="line">        fields = (<span class="string">'pk'</span>, <span class="string">'title'</span> , <span class="string">'body'</span>, <span class="string">'author_name'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># def perform_create(self, serializer):</span></span><br><span class="line">        <span class="comment">#     serializer.save(author = self.request.user)</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlbumSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 글쓴이를 자동적으로 등록함</span></span><br><span class="line">    author_name = serializers.ReadOnlyField(source=<span class="string">'author.username'</span>)</span><br><span class="line">    <span class="comment"># 이미지를 업로드하고 결과값을 url로 하겠다</span></span><br><span class="line">    image = serializers.ImageField(use_url=<span class="literal">True</span>)</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Album</span><br><span class="line">        fields = (<span class="string">'pk'</span>, <span class="string">'author_name'</span> , <span class="string">'image'</span>, <span class="string">'desc'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilesSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 글쓴이를 자동적으로 등록함</span></span><br><span class="line">    author_name = serializers.ReadOnlyField(source=<span class="string">'author.username'</span>)</span><br><span class="line">    myfile = serializers.FileField(use_url= <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Files</span><br><span class="line">        fields = (<span class="string">'pk'</span>, <span class="string">'author_name'</span> , <span class="string">'myfile'</span>, <span class="string">'desc'</span>)</span><br></pre></td></tr></table></figure><h2 id="urls-py-PROJECT"><a href="#urls-py-PROJECT" class="headerlink" title="urls.py (PROJECT)"></a>urls.py (PROJECT)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"><span class="keyword">from</span> mystorage <span class="keyword">import</span> urls</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.conf.urls.static <span class="keyword">import</span> static</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    <span class="comment"># url 연결</span></span><br><span class="line">    path(<span class="string">''</span>, include(<span class="string">'mystorage.urls'</span>)),</span><br><span class="line">]</span><br><span class="line">urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure><h2 id="urls-py-APP"><a href="#urls-py-APP" class="headerlink" title="urls.py (APP)"></a>urls.py (APP)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.routers <span class="keyword">import</span> DefaultRouter</span><br><span class="line"><span class="keyword">from</span> mystorage <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> urls</span><br><span class="line"></span><br><span class="line"><span class="comment"># DefaultRouter기반의 라우터 등록 </span></span><br><span class="line">router = DefaultRouter()</span><br><span class="line"></span><br><span class="line">router.register(<span class="string">'essay'</span>, views.PostViewSet)</span><br><span class="line">router.register(<span class="string">'album'</span>, views.ImgViewSet)</span><br><span class="line">router.register(<span class="string">'files'</span>, views.FileViewSet)</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">''</span>, include(router.urls)),</span><br><span class="line">    path(<span class="string">'api-auth/'</span>, include(<span class="string">'rest_framework.urls'</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="views-py"><a href="#views-py" class="headerlink" title="views.py"></a>views.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Essay , Album, Files</span><br><span class="line"><span class="keyword">from</span> .serializers <span class="keyword">import</span> EssaySerializer, AlbumSerializer, FilesSerializer</span><br><span class="line"><span class="keyword">from</span> rest_framework.filters <span class="keyword">import</span> SearchFilter</span><br><span class="line"><span class="keyword">from</span> rest_framework.parsers <span class="keyword">import</span> MultiPartParser, FormParser</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"></span><br><span class="line"><span class="comment"># ModelViewSet 두가지 객체 - queryset / serializer_class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PostViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    queryset = Essay.objects.all()</span><br><span class="line">    serializer_class = EssaySerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 검색 기능</span></span><br><span class="line">    filter_backends = [SearchFilter]</span><br><span class="line">    search_fields = (<span class="string">'title'</span>, <span class="string">'body'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 현재 request를 보낸 유저</span></span><br><span class="line">    <span class="comment"># == self.request.user</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        qs = super().get_queryset()</span><br><span class="line">        <span class="keyword">if</span> self.request.user.is_authenticated:</span><br><span class="line">            qs = qs.filter(author= self.request.user)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            qs = qs.none()</span><br><span class="line">        <span class="keyword">return</span> qs</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImgViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    </span><br><span class="line">    queryset = Album.objects.all()</span><br><span class="line">    serializer_class = AlbumSerializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 다양한 미디어 파일을 받아야하기 때문에 지정해줘야함</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    queryset = Files.objects.all()</span><br><span class="line">    serializer_class = FilesSerializer</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># parser_class 지정</span></span><br><span class="line">    parser_classes = (MultiPartParser, FormParser)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># create() 오버라이딩 / API HTTP -&gt; get() post() 오버라이딩</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *arg, **kwargs)</span>:</span></span><br><span class="line">        serializer = FilesSerializer(data=request.data)</span><br><span class="line">        <span class="keyword">if</span> serializer.is_valid():</span><br><span class="line">            serializer.save()</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.data, status= HTTP_201_CREATED)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.error, status = HTTP_400_BAD_REQUEST)</span><br></pre></td></tr></table></figure><h2 id="실행화면"><a href="#실행화면" class="headerlink" title="실행화면"></a>실행화면</h2><p><img alt="Main" data-src="/img/Django/Rest_Main.PNG" class="lozad"><br><img alt="Result" data-src="/img/Django/Rest_result.PNG" class="lozad"></p><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;프로젝트-소개&quot;&gt;&lt;a href=&quot;#프로젝트-소개&quot; class=&quot;headerlink&quot; title=&quot;프로젝트 소개&quot;&gt;&lt;/a&gt;프로젝트 소개&lt;/h2&gt;&lt;p&gt;RESTful API를 가지고 3개의 게시판을 만들어보자&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;글을 쓸 
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>수라상</title>
    <link href="https://khs9628.github.io/2019/09/16/royalTable/"/>
    <id>https://khs9628.github.io/2019/09/16/royalTable/</id>
    <published>2019-09-16T11:01:03.000Z</published>
    <updated>2019-09-19T07:01:51.472Z</updated>
    
    <content type="html"><![CDATA[<p><img alt="LOGO" data-src="/img/PORTFOLIO/RoyalTable/LOGO.PNG" class="lozad"></p><h1 id="수라상"><a href="#수라상" class="headerlink" title="수라상"></a><a href="https://github.com/khs9628/NewbieThon" rel="external nofollow noopener noreferrer" target="_blank">수라상</a></h1><p><img alt="LOGO" data-src="/img/PORTFOLIO/RoyalTable/intro.PNG" class="lozad"></p><h2 id="프로젝트"><a href="#프로젝트" class="headerlink" title="프로젝트"></a>프로젝트</h2><pre><code>프로젝트 이름 : 수라상 사용언어 : JavaScript , Html , Css [ Django ]사용Tool : vsCode</code></pre><h2 id="프로젝트-소개"><a href="#프로젝트-소개" class="headerlink" title="프로젝트 소개"></a>프로젝트 소개</h2><pre><code>저희가 뽑은 키워드는 백종원, 건강식품, 오타쿠 입니다. 저희는 그 중 건강식품과 오타쿠 키워드를 선택하였습니다.저희가 제공할 서비스의 이름은 수라상입니다.수라상은 건강식품 정보 공유 커뮤니티로 수라상이라 지은 이유는수는 나아갈 수와 라 는 LIFE 상은 위 상을 사용하여서 음식을 통해 나의 라이프를 높게 수(나아갈수) 나가가자 라는 뜻과건강에 좋은 임금님 밥상을 생각하여 밥을 제공하자는 두 가지 의미를 담고 있습니다.  건강에 좋은 임금님 밥상을 생각하여 좋은 밥을 제공하려는 움직임각 분야의 오타쿠별(자전거, 다이어트, 음주 등)로 게시판을 나누어 취미가  맞는 사람들끼리 각 분야에 관련되어 좋은 건강식품 및 건강정보를 공유하는 커뮤니티입니다.</code></pre><h3 id="일정"><a href="#일정" class="headerlink" title="일정"></a>일정</h3><p>2019.05.04 ~ 05.05</p><h3 id="서비스-소개"><a href="#서비스-소개" class="headerlink" title="서비스 소개"></a>서비스 소개</h3><p><img alt="서ꈰ스1" data-src="/img/PORTFOLIO/RoyalTable/service1.PNG" class="lozad"><br><img alt="서ꈰ스1" data-src="/img/PORTFOLIO/RoyalTable/service2.PNG" class="lozad"><br><img alt="서ꈰ스1" data-src="/img/PORTFOLIO/RoyalTable/service3.PNG" class="lozad"></p><h3 id="수익성"><a href="#수익성" class="headerlink" title="수익성"></a>수익성</h3><p><img alt="수익" data-src="/img/PORTFOLIO/RoyalTable/cost.png" class="lozad"></p><h3 id="발전가능성"><a href="#발전가능성" class="headerlink" title="발전가능성"></a>발전가능성</h3><p><img alt="TOBE" data-src="/img/PORTFOLIO/RoyalTable/TOBE.png" class="lozad"></p><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img alt=&quot;LOGO&quot; data-src=&quot;/img/PORTFOLIO/RoyalTable/LOGO.PNG&quot; class=&quot;lozad&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;수라상&quot;&gt;&lt;a href=&quot;#수라상&quot; class=&quot;headerlink&quot; title=&quot;수라
      
    
    </summary>
    
    
      <category term="프로젝트" scheme="https://khs9628.github.io/categories/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/"/>
    
    
      <category term="PORTFOLIO" scheme="https://khs9628.github.io/tags/PORTFOLIO/"/>
    
  </entry>
  
  <entry>
    <title>알고리즘 개념정리</title>
    <link href="https://khs9628.github.io/2019/09/10/codingtest/"/>
    <id>https://khs9628.github.io/2019/09/10/codingtest/</id>
    <published>2019-09-10T09:24:15.000Z</published>
    <updated>2019-09-21T06:47:10.666Z</updated>
    
    <content type="html"><![CDATA[<h2 id="알고리즘-기본-개념-정리"><a href="#알고리즘-기본-개념-정리" class="headerlink" title="알고리즘 기본 개념 정리"></a>알고리즘 기본 개념 정리</h2><h3 id="cf-HASH란"><a href="#cf-HASH란" class="headerlink" title="cf) HASH란?"></a>cf) HASH란?</h3><p>임의의 크기를 가진 데이터를 고정된 데이터의 크기로 변환시키는 것<br>-&gt; 특정한 배열의 인덱스나 위치를 입력하고자 하는 데이터의 값을 이용해 저장하거나 찾을 수 있음</p><h3 id="cf-HashMap이란"><a href="#cf-HashMap이란" class="headerlink" title="cf) HashMap이란?"></a>cf) HashMap이란?</h3><p>Key와 value를 묶어 하나의 entry로 저장하는 Map이다.<br>hashing을 사용하기 때문에 많은양의 데이터를 검색하는데 뛰어난 성능을 보여준다.</p><ul><li>map의 인터페이스중 하나로 (“Key”, “Value”)로 이루어져 있다.</li><li>key 값은 중복이 불가능 / value는 중복이 가능</li><li>멀티쓰레드에서 동시에 HashMap을 건드려 Key-value값을 사용하면 문제가 생긴다 -&gt; 충돌</li></ul><h3 id="HashMap-생성자-메서드"><a href="#HashMap-생성자-메서드" class="headerlink" title="HashMap 생성자/메서드"></a>HashMap 생성자/메서드</h3><table><thead><tr><th align="center">생성자/메서드</th><th align="center">설명</th></tr></thead><tbody><tr><td align="center">HashMap()</td><td align="center">HashMap 객체를 생성</td></tr><tr><td align="center">void clear()</td><td align="center">HashMap에 저장된 모든 요소를 제거한다.</td></tr><tr><td align="center">Object clone()</td><td align="center">현재 HashMap을 복제하여 반환한다.</td></tr><tr><td align="center">boolean containsKey(Object key)</td><td align="center">HashMap에 지정된 키(key)가 포함되어 있는지 알려준다.</td></tr><tr><td align="center">boolean containsValue(Object value)</td><td align="center">HashMap에 지정된 값(Value)이 포함되어 있는지 알려준다.</td></tr><tr><td align="center">Set entrySet()</td><td align="center">HashMap에 저장된 Key-Value값을 엔트리(키와 값을 결함)의 형태로 Set에 저장하여 반환</td></tr><tr><td align="center">Object get(Object Key)</td><td align="center">지정된 키의 값을 반환한다.</td></tr><tr><td align="center">boolean isEmpty()</td><td align="center">HashMap이 비어있는지 확인한다.</td></tr><tr><td align="center">Set keySet()</td><td align="center">HashMap에 저장된 모든 키가 저장된 Set을 반환한다.</td></tr><tr><td align="center">Object put(Object key, Object Value)</td><td align="center">HashMap에 키와 값을 저장</td></tr><tr><td align="center">void putAll(Map m)</td><td align="center">Map에 해당하는 모든 요소를 HashMap에 저장한다.</td></tr><tr><td align="center">Object remove(Object key)</td><td align="center">HashMap에서 지정된 키로 지정된 값을 제거한다.</td></tr><tr><td align="center">int size()</td><td align="center">HashMap에 저장된 요소의 개수를 반환한다.</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;알고리즘-기본-개념-정리&quot;&gt;&lt;a href=&quot;#알고리즘-기본-개념-정리&quot; class=&quot;headerlink&quot; title=&quot;알고리즘 기본 개념 정리&quot;&gt;&lt;/a&gt;알고리즘 기본 개념 정리&lt;/h2&gt;&lt;h3 id=&quot;cf-HASH란&quot;&gt;&lt;a href=&quot;#c
      
    
    </summary>
    
    
      <category term="알고리즘" scheme="https://khs9628.github.io/categories/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/"/>
    
    
      <category term="알고리즘" scheme="https://khs9628.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/"/>
    
  </entry>
  
  <entry>
    <title>기능 개발</title>
    <link href="https://khs9628.github.io/2019/09/10/codingtest3/"/>
    <id>https://khs9628.github.io/2019/09/10/codingtest3/</id>
    <published>2019-09-10T08:58:39.000Z</published>
    <updated>2019-09-20T13:55:36.119Z</updated>
    
    <content type="html"><![CDATA[<h2 id="기능-개발"><a href="#기능-개발" class="headerlink" title="기능 개발"></a><a href="https://programmers.co.kr/learn/courses/30/lessons/42586" rel="external nofollow noopener noreferrer" target="_blank">기능 개발</a></h2><p><strong>스택/큐</strong><br>프로그래머스 팀에서는 기능 개선 작업을 수행 중입니다. 각 기능은 진도가 100%일 때 서비스에 반영할 수 있습니다.</p><p>또, 각 기능의 개발속도는 모두 다르기 때문에 뒤에 있는 기능이 앞에 있는 기능보다 먼저 개발될 수 있고, 이때 뒤에 있는 기능은 앞에 있는 기능이 배포될 때 함께 배포됩니다.</p><p>먼저 배포되어야 하는 순서대로 작업의 진도가 적힌 정수 배열 progresses와 각 작업의 개발 속도가 적힌 정수 배열 speeds가 주어질 때 각 배포마다 몇 개의 기능이 배포되는지를 return 하도록 solution 함수를 완성하세요.</p><h2 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h2><blockquote><ul><li>작업의 개수(progresses, speeds배열의 길이)는 100개 이하입니다.</li><li>작업 진도는 100 미만의 자연수입니다.</li><li>작업 속도는 100 이하의 자연수입니다.</li><li>배포는 하루에 한 번만 할 수 있으며, 하루의 끝에 이루어진다고 가정합니다. 예를 들어 진도율이 95%인 작업의 개발 속도가 하루에 4%라면 배포는 2일 뒤에 이루어집니다.</li></ul></blockquote><h2 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h2><table><thead><tr><th>progresses</th><th>speeds</th><th>return</th></tr></thead><tbody><tr><td>[93,30,55]</td><td>[1,30,5]</td><td>[2,1]</td></tr></tbody></table><p>첫 번째 기능은 93% 완료되어 있고 하루에 1%씩 작업이 가능하므로 7일간 작업 후 배포가 가능합니다.<br>두 번째 기능은 30%가 완료되어 있고 하루에 30%씩 작업이 가능하므로 3일간 작업 후 배포가 가능합니다. 하지만 이전 첫 번째 기능이 아직 완성된 상태가 아니기 때문에 첫 번째 기능이 배포되는 7일째 배포됩니다.<br>세 번째 기능은 55%가 완료되어 있고 하루에 5%씩 작업이 가능하므로 9일간 작업 후 배포가 가능합니다.</p><p>따라서 7일째에 2개의 기능, 9일째에 1개의 기능이 배포됩니다.</p><h2 id="1차-답안-배열을-적용"><a href="#1차-답안-배열을-적용" class="headerlink" title="1차 답안 - 배열을 적용"></a>1차 답안 - 배열을 적용</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] progresses, <span class="keyword">int</span>[] speeds) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] dayOfend = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">int</span> day = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;progresses.length; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span>(progresses[i] + (day*speeds[i]) &lt; <span class="number">100</span>) &#123;</span><br><span class="line">                day++;</span><br><span class="line">            &#125;</span><br><span class="line">            dayOfend[day]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(dayOfend).filter(i -&gt; i!=<span class="number">0</span>).toArray();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2차-답안-큐를-이용"><a href="#2차-답안-큐를-이용" class="headerlink" title="2차 답안 - 큐를 이용"></a>2차 답안 - 큐를 이용</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] progresses, <span class="keyword">int</span>[] speeds) &#123;</span><br><span class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//q의 사이즈는 poll 수행시 변경되므로 for문에서 고정조건으로 사용할 시 변수에 사이즈를 따로 담아둔다.</span></span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = progresses.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == len) &#123;</span><br><span class="line">                q.add(num);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(progresses[i] &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">                num++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(num != <span class="number">0</span>) &#123;</span><br><span class="line">                q.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> remain = <span class="number">100</span> - progresses[i];</span><br><span class="line">            <span class="keyword">int</span> day = remain / speeds[i]; <span class="comment">// 100프로 달성까지 걸리는 일수 </span></span><br><span class="line">            <span class="keyword">if</span>(remain % speeds[i] != <span class="number">0</span>) day++;</span><br><span class="line">             </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; len; j++)&#123;</span><br><span class="line">                progresses[j] += (day * speeds[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            num++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[q.size()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answer.length; i++)&#123;</span><br><span class="line">            answer[i] = q.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3차-답안-큐를-이용"><a href="#3차-답안-큐를-이용" class="headerlink" title="3차 답안 - 큐를 이용"></a>3차 답안 - 큐를 이용</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentLinkedQueue;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] progresses, <span class="keyword">int</span>[] speeds) &#123;</span><br><span class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> ConcurrentLinkedQueue&lt;Integer&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; progresses.length; i++) &#123;</span><br><span class="line">            q.add((<span class="number">100</span>-progresses[i])%speeds[i] == <span class="number">0</span>? (<span class="number">100</span> - progresses[i]) / speeds[i]</span><br><span class="line">                    : (<span class="number">100</span> - progresses[i]) / speeds[i] + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">int</span> standard = q.poll();</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> num = q.poll();</span><br><span class="line">            <span class="keyword">if</span>(standard &gt;= num) &#123;</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                result.add(cnt);</span><br><span class="line">                cnt = <span class="number">1</span>;</span><br><span class="line">                standard = num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        result.add(cnt);</span><br><span class="line">        <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[result.size()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answer.length; i++) &#123;</span><br><span class="line">            answer[i] = result.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;기능-개발&quot;&gt;&lt;a href=&quot;#기능-개발&quot; class=&quot;headerlink&quot; title=&quot;기능 개발&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://programmers.co.kr/learn/courses/30/lessons/42586&quot; rel=
      
    
    </summary>
    
    
      <category term="알고리즘" scheme="https://khs9628.github.io/categories/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/"/>
    
    
      <category term="알고리즘" scheme="https://khs9628.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/"/>
    
  </entry>
  
  <entry>
    <title>ViewSet &amp; Router</title>
    <link href="https://khs9628.github.io/2019/09/10/Django3/"/>
    <id>https://khs9628.github.io/2019/09/10/Django3/</id>
    <published>2019-09-10T08:11:12.000Z</published>
    <updated>2019-09-19T08:43:04.987Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ViewSet-amp-Router"><a href="#ViewSet-amp-Router" class="headerlink" title="ViewSet &amp; Router"></a>ViewSet &amp; Router</h2><h3 id="Pagination"><a href="#Pagination" class="headerlink" title="Pagination"></a>Pagination</h3><h4 id="API-서버의-페이지네이션의-의의"><a href="#API-서버의-페이지네이션의-의의" class="headerlink" title="API 서버의 페이지네이션의 의의"></a>API 서버의 페이지네이션의 의의</h4><p>하나의 request만으로 처리하기 어려운 레코드들을<br>여러 request로 나누어 전송</p><p>DRF (장고 Rest Framework)의 Pagination</p><ol><li><strong>PageNumberPagination</strong> - Default</li><li>LimitOffsetPagination</li><li>CusorPagination</li><li><strong>CustomizedPagination</strong> </li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pagenation 설정 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># settings.py - 전역으로 설정 (Default)</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_PAGINATION_CLASS'</span>: <span class="string">'rest_framework.pagination.PageNumberPagination'</span>,</span><br><span class="line">    <span class="string">'PAGE_SIZE'</span>: <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># views.py - 뷰단 별로 설정(CustomizedPagination)</span></span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> PageNumberPagination</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myPagination</span><span class="params">(PageNumberPagination)</span></span></span><br><span class="line">    page_size = 100</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    queryset = UserPost.objects.all()</span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    pagination_class = myPagination</span><br></pre></td></tr></table></figure><h3 id="Filtering-vs-Search"><a href="#Filtering-vs-Search" class="headerlink" title="Filtering vs Search ?"></a>Filtering vs Search ?</h3><table><thead><tr><th align="center">Filtering</th><th align="center">Search</th></tr></thead><tbody><tr><td align="center">Request 걸러보내기</td><td align="center">Response 걸러보내기</td></tr></tbody></table><p><strong><em>cf) Request 가져오는법</em></strong></p><table><thead><tr><th align="center">내용</th><th align="center">명령어</th></tr></thead><tbody><tr><td align="center">내가 보낸 request</td><td align="center">self.request</td></tr><tr><td align="center">내가보낸 request의 user</td><td align="center">Self.request.user</td></tr><tr><td align="center">내가보낸 GET request</td><td align="center">Self.request.GET (= self.request.query_param)</td></tr><tr><td align="center">내가보낸 POST request</td><td align="center">self.request.POST</td></tr></tbody></table><h3 id="Authentication-amp-Permission"><a href="#Authentication-amp-Permission" class="headerlink" title="Authentication &amp; Permission"></a>Authentication &amp; Permission</h3><p><strong><em>Authentication</em></strong><br>서비스를 이용하는데 있어 내가 어느정도의 권한이 있음을  알려주는 과정<br><strong><em>Permission</em></strong><br>서비스를 어느 정도로 이용할 수 있는지에 대한 권한</p><ol><li><p>Authentication</p><ul><li><p>BasicAuthentication<br>HTTP 자체 기본인증에 기반한 인증방식<br>HTTP 제어 헤더로 넘긴 ID, PW를 BASE64 ENCODING</p></li><li><p>TokenAuthentication<br>인증요청 -&gt; 유일한 key값을 발급</p></li><li><p>SessionAuthentication<br>로그인이 될 때마다 저장되는 Session 정보를 참조하여 인증</p><p>cf) Session을 관리하는 곳</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#settings.py</span></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line"><span class="string">'django.contrib.sessions.middleware.SessionMiddleware'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>RemoteUserAuthentication<br>User정보가 다른 서비스에서 관리될 떄 사용되는 인증방식</p></li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#settings.py</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_AUTHENTICATION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.authentication.BasicAuthentication'</span>,</span><br><span class="line">        <span class="string">'rest_framework.authentication.SessionAuthentication'</span>,</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.authentication <span class="keyword">import</span> SessionAuthentication, BasicAuthentication, TokenAuthentication</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    authentication_classes = [TokenAuthentication,</span><br></pre></td></tr></table></figure><ol start="2"><li><p>Permission</p><ul><li><p>AllowAny - default<br>인증된 요청이든 비인증 요청이든 모든 허용하겠다.</p></li><li><p>IsAuthenticated<br>인증된 요청에 대해서만 View 호출을 허용하겠다.</p></li><li><p>IsAdminUser<br>Staff User에 대해서만 요청을 허용하겠다.</p></li><li><p>IsAuthenticatedOrReadOnly<br>비인증요청에 대해서는 읽기만 허용하겠다.</p></li><li><p>ETC<br>DjangoModelPermissions<br>DjangoModelPermissionsORAnonReadOnly<br>DjangoObjectPermissions</p></li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#settings.py</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_PERMISSION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.permissions.IsAuthenticated'</span>,</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> AllowAny, IsAuthenticated, IsAuthenticatedOrReadOnly, IsAdminUser</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserPostViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    authentication_classes = [TokenAuthentication, SessionAuthentication]</span><br><span class="line">    permission_classes = [IsAuthenticated]</span><br><span class="line"></span><br><span class="line"><span class="comment">#FBV -&gt; decorator를 이용한 설정</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> AllowAny, IsAuthenticated, IsAuthenticatedOrReadOnly, IsAdminUser</span><br><span class="line"></span><br><span class="line"><span class="meta">@api_view(&#123;'GET'&#125;)</span></span><br><span class="line"><span class="meta">@permission_classes(&#123;'IsAuthenticated'&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> 함수명<span class="params">(request, format=None)</span>:</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="Token-Authentication"><a href="#Token-Authentication" class="headerlink" title="Token Authentication"></a>Token Authentication</h3><p>BasicAuthentication, SessionAuthentication의 한계<br>Mobile Client에 적합</p><h4 id="수행-과정"><a href="#수행-과정" class="headerlink" title="수행 과정"></a>수행 과정</h4><ol><li><p>username, password와 1:1 매칭되는 고유 key 생성 / 발급</p><ul><li><p>rest_framework/authtoken/views.py의 ObtaionAuthToken을 이용한 생성</p></li><li><p>Python 명령어를 통한 생성</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python manage.py drf_create_token &lt;username&gt;</span><br><span class="line"><span class="comment"># 강제로 재 생성</span></span><br><span class="line">python manage.py drf_create_token -r &lt;username&gt;</span><br></pre></td></tr></table></figure></li><li><p>Signal을 이용한 Token 획득</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> post_save</span><br><span class="line"><span class="keyword">from</span> django.dispatch <span class="keyword">import</span> receiver</span><br><span class="line"><span class="keyword">from</span> rest_framework.authentication.models <span class="keyword">import</span> Token</span><br><span class="line"></span><br><span class="line"><span class="comment">#post_save = DB에 뭔가 저장된 직후에 특정 동작 수행</span></span><br><span class="line"><span class="meta">@receiver(post_save, sender = settings.AUTH_USER_MODEL)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_auth_token</span><span class="params">(sender, instance = None, created=False, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> created:</span><br><span class="line">        Token.objects.create(user=instance)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>발급받은 Token을 API요청에 담아 인증을 처리</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http POST http://127.0.0.1:8000/userpost/ <span class="string">"Authorization Token 토큰번호"</span> title =<span class="string">"토큰글"</span> body =<span class="string">"토큰내용"</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="실습"><a href="#실습" class="headerlink" title="실습"></a>실습</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#settings.py</span></span><br><span class="line"><span class="comment"># 1:1 매칭 -&gt; OneToOneField를 이용해 Token을 발급</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'rest_framework.authtoken'</span></span><br><span class="line">]</span><br><span class="line"><span class="comment">#bash</span></span><br><span class="line">python manage.py migrate</span><br><span class="line"><span class="comment">#현수 계정에 대한 토큰 생성</span></span><br><span class="line">python manage.py drf_create_token hyunsoo</span><br><span class="line"></span><br><span class="line"><span class="comment">#urls.py</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.authtoken.views <span class="keyword">import</span> obtain_auth_token</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'api-token-auth/'</span>, obtain_auth_token),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>하루를 기록하다</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ViewSet-amp-Router&quot;&gt;&lt;a href=&quot;#ViewSet-amp-Router&quot; class=&quot;headerlink&quot; title=&quot;ViewSet &amp;amp; Router&quot;&gt;&lt;/a&gt;ViewSet &amp;amp; Router&lt;/h2&gt;&lt;h3 i
      
    
    </summary>
    
    
      <category term="Django" scheme="https://khs9628.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://khs9628.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>5Ducku</title>
    <link href="https://khs9628.github.io/2019/09/10/5Ducku/"/>
    <id>https://khs9628.github.io/2019/09/10/5Ducku/</id>
    <published>2019-09-10T04:35:01.000Z</published>
    <updated>2019-09-21T10:52:06.898Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="프로젝트" scheme="https://khs9628.github.io/categories/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/"/>
    
    
      <category term="PORTFOLIO" scheme="https://khs9628.github.io/tags/PORTFOLIO/"/>
    
  </entry>
  
</feed>
